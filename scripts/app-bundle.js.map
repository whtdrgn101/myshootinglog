{"version":3,"sources":["app.js","environment.js","main.js","welcome.js","bow/bow.js","bow/bow_list.js","common/shooting-log-store.js","resources/index.js","round/round.js","round/scorecard.js","user/login.js","user/profile.js","user/register.js","resources/elements/nav-bar.js","resources/value-converters/dateFormatValueConverter.js","E:/dev/personal/myshootinglog/src/app.html","E:/dev/personal/myshootinglog/src/welcome.html","E:/dev/personal/myshootinglog/src/bow/bow.html","E:/dev/personal/myshootinglog/src/bow/bow_list.html","E:/dev/personal/myshootinglog/src/round/round.html","E:/dev/personal/myshootinglog/src/round/scorecard.html","E:/dev/personal/myshootinglog/src/user/login.html","E:/dev/personal/myshootinglog/src/user/profile.html","E:/dev/personal/myshootinglog/src/user/register.html","E:/dev/personal/myshootinglog/src/resources/elements/nav-bar.html"],"names":["App","_store","store","lsStore","JSON","parse","sessionStorage","e","_","extend","configureRouter","config","router","title","addPipelineStep","AuthorizeStep","map","route","name","moduleId","auth","nav","cs","run","navigationInstruction","next","getAllInstructions","some","i","getItem","cancel","debug","testing","API_URL","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","Welcome","eventAggregator","heading","last30Stats","lifetimeStats","activate","parms","routeConfig","publish","self","getLast30Stats","stats","getLifetimeStats","Bow","_eventAggregator","bow","bowTypes","appRouter","client","x","withBaseUrl","withHeader","authToken","token","getBowTypes","id","undefined","get","data","response","catch","error","status","alert","clearStore","navigateToRoute","save","addBow","updateBow","put","stringify","navigateBack","member_id","userId","post","BowList","_router","_data","newBow","editBow","deleteBow","confirm","delete","refreshBows","bows","UpperValueConverter","toView","value","toUpperCase","ShootingLogStore","_http","user","scorecard","errorMessage","round","useStandardConfiguration","withDefaults","headers","http","subscribe","handleScorecardChanged","handleLogout","handleViewActivate","handleBowAdd","payload","handleBowUpdate","handleBowDelete","handleRoundAdd","handleRoundDelete","handleRoundUpdate","handleBowStoreStale","handleRoundStoreStale","handleUserAuthenticated","getUserInSession","setItem","saveStore","_id","resolve","reject","fetch","method","body","results","roundId","json","rounds","bowId","getScorecard","getBow","getRound","authenticateUser","_email","_password","usr","isAuthenticated","getUserDetails","userDetails","location","image","details","register","initUserScorecard","card","accountId","email","Round","_EventAggregator","roundTypes","newEndScore","newArrowCount","handleDateChange","handleRoundEndsChange","round_date","Date","total_score","ends","end_number","end_score","arrow_count","length","bow_id","round_type","addEnd","push","deleteEnd","end","deletedEnd","find","without","roundNumber","forEach","endChanged","calculateRoundScore","addRound","updateRound","action","_round","scores","Number","reduce","total","num","newRound","editRound","deleteRound","refreshRounds","Login","_dl","password","loginUser","Profile","shootingLogStore","dispatcher","saveProfile","embedFile","file","reader","FileReader","onload","theFile","target","result","readAsDataURL","BlobToUrlValueConverter","blob","window","URL","createObjectURL","confpassword","dataLayer","res","err","message","NavBar","logout","clear","DateFormatValueConverter","format","fromView","str"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {computedFrom, inject} from 'aurelia-framework';\nimport {Redirect} from 'aurelia-router';\nimport Store from 'common/shooting-log-store';\n\n@inject(Store)\nexport class App {\n\n  constructor(_store) {\n    this.store = _store;\n    let lsStore = null;\n    try { lsStore = JSON.parse(sessionStorage.store)}\n    catch(e){}\n\n    if(lsStore) {\n      this.store = _.extend(this.store, lsStore);\n    }\n  }\n\n  configureRouter(config, router) {\n    config.title = 'My Shooting Log';\n    config.addPipelineStep('authorize', AuthorizeStep);\n    config.map([\n      { route: ['', 'welcome'], name: 'home',      moduleId: 'welcome',         auth: true,  nav: true,  title: 'Home', cs: this.store },\n      { route: ['scorecard'],   name: 'scorecard', moduleId: 'round/scorecard', auth: true,  nav: true,  title: 'Scorecard', cs: this.store },\n      { route: ['round'],       name: 'round',     moduleId: 'round/round',     auth: true,  nav: false, title: 'Round', cs: this.store },\n      { route: ['bow_list'],    name: 'bow_list',  moduleId: 'bow/bow_list',    auth: true,  nav: true,  title: 'Bows', cs: this.store },\n      { route: ['bow'],         name: 'bow',       moduleId: 'bow/bow',         auth: true,  nav: false, title: 'Bow Details', cs: this.store },\n      { route: ['profile'],     name: 'profile',   moduleId: 'user/profile',    auth: true,  nav: true,  title: 'Profile', cs: this.store },\n      { route: ['login'],       name: 'login',     moduleId: 'user/login',      auth: false, nav: false, title: 'Login', cs: this.store },\n      { route: ['register'],    name: 'register',  moduleId: 'user/register',   auth: false, nav: false, title: 'Register', cs: this.store },\n    ]);\n\n    this.router = router;\n  }\n}\n\nclass AuthorizeStep {\n\n  run(navigationInstruction, next) {\n    // Check if the route has an \"auth\" key\n    // The reason for using `nextInstructions` is because\n    // this includes child routes.\n    if (navigationInstruction.getAllInstructions().some(i => i.config.auth)) {\n      var auth = JSON.parse(sessionStorage.getItem('auth-token'));\n      if(auth == null) {\n        return next.cancel(new Redirect('login'));\n      }\n    }\n\n    return next();\n  }\n}\n","export default {\n  debug: true,\n  testing: true,\n  API_URL: \"http://www.myshootinglog.com:8080\"\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport Store from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(Router, Store, EventAggregator)\nexport class Welcome {\n  heading = 'Welcome to MyShootingLog!';\n  last30Stats = {};\n  lifetimeStats = {};\n\n  constructor(router, store, eventAggregator) {\n    this.router = router;\n    this.store = store;\n    this.eventAggregator = eventAggregator;\n  }\n\n  activate(parms, routeConfig) {\n    this.eventAggregator.publish('viewActivate');\n    var self = this;\n    this.store.getLast30Stats().then(function(stats){\n      self.last30Stats = stats[0];\n    });\n    this.store.getLifetimeStats().then(function(stats){\n      self.lifetimeStats = stats[0];\n    });\n  }\n\n  get latestRound() {\n\n  }\n\n  get mostUsedBow() {\n\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport Store from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport environment from '../environment';\nimport {HttpClient} from 'aurelia-http-client';\n\n@inject(Router, Store, EventAggregator)\nexport class Bow {\n  \n  heading = 'Bow Details';\n  bow = {};\n  bowTypes = [\n    'Compound',\n    'Crossbow',\n    'Longbow',\n    'Recurve',\n    'Self',\n    'Stick'\n  ];\n  constructor(router, _store, _eventAggregator){\n    this.appRouter = router;\n    this.store = _store;\n    this.eventAggregator = _eventAggregator;\n    this.client = new HttpClient().configure(x => {\n      x.withBaseUrl(environment.API_URL);\n      x.withHeader('x-authorization',this.store.authToken.token);\n    });\n  }\n\n  activate(parms, routeConfig) {\n    this.eventAggregator.publish('viewActivate');\n    this.getBowTypes();\n    var self = this;\n    if(parms.id != undefined && parms.id !== \"-1\") {\n      this.client.get(\"/bow/\" + parms.id)\n        .then(data => {\n          this.bow = JSON.parse(data.response);\n        })\n        .catch(error => {\n          if(error.status === 403) {\n            alert('Session timeout, please log in again');\n            this.store.clearStore();\n            this.router.navigateToRoute('login');\n          } else {\n            this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n          }\n\n        });\n    }\n  }\n\n  save() {\n    if(this.bow.id === undefined)\n    {\n      this.addBow();\n    } else {\n      this.updateBow();\n    }\n\n  }\n\n  updateBow() {\n    var self = this;\n    this.client.put(\"/bow/\" + this.bow.id, JSON.stringify(this.bow))\n      .then(data => {\n        self.bow = JSON.parse(data.response);\n        this.appRouter.navigateBack();\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n        }\n\n      });\n  }\n\n  addBow() {\n    var self = this;\n    this.bow.member_id = this.store.authToken.userId;\n    this.client.post(\"/bow\", JSON.stringify(this.bow))\n      .then(data => {\n        self.bow = JSON.parse(data.response);\n        this.appRouter.navigateBack();\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n        }\n\n      });\n  }\n\n  getBowTypes() {\n    var self = this;\n    this.client.get(\"/bowtype\", JSON.stringify(this.bow))\n      .then(data => {\n        self.bowTypes = JSON.parse(data.response);\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving list of bow types, please contact support or try again\";\n        }\n\n      });\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport DataLayer from 'common/shooting-log-store';\nimport {HttpClient} from 'aurelia-http-client';\nimport environment from '../environment';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(Router, DataLayer, EventAggregator)\nexport class BowList{\n\n  constructor(_router, _data, _eventAggregator){\n    this.appRouter = _router;\n    this.store = _data;\n    this.eventAggregator = _eventAggregator;\n    this.client = new HttpClient().configure(x => {\n      x.withBaseUrl(environment.API_URL);\n      x.withHeader('x-authorization',this.store.authToken.token);\n    });\n\n  }\n\n  heading = 'Your bows';\n\n  newBow() {\n    this.appRouter.navigateToRoute('bow', { id: -1 });\n  }\n\n  editBow(bow) {\n    this.appRouter.navigateToRoute('bow', { id: bow.id });\n  }\n\n  deleteBow(bow) {\n    var self = this;\n    if(confirm(\"Are you sure you want to delete this bow?\")) {\n      this.client.delete(\"/bow/\" + bow.id)\n        .then(data => {\n          self.refreshBows();\n        })\n        .catch(error => {\n          if(error.status === 403) {\n            alert('Session timeout, please log in again');\n            this.store.clearStore();\n            this.router.navigateToRoute('login');\n          } else {\n            this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n          }\n\n        });\n    }\n  }\n\n  activate() {\n    this.eventAggregator.publish('viewActivate');\n    this.refreshBows();\n  }\n\n  refreshBows() {\n    var self = this;\n    this.client.get(\"/user/\" + this.store.authToken.userId + \"/bows\")\n      .then(data => {\n        self.bows = JSON.parse(data.response);\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n        }\n\n      });\n  }\n}\n\nexport class UpperValueConverter {\n  toView(value){\n    return value && value.toUpperCase();\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-fetch-client';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator, HttpClient)\nexport default class ShootingLogStore {\n\n  user = null;\n  scorecard = null;\n  errorMessage = null;\n  round = null;\n  bow = null;\n  authToken = null;\n\n  constructor(_eventAggregator, _http){\n    this.eventAggregator = _eventAggregator;\n    _http.configure(config => {\n      config\n        .useStandardConfiguration()\n        .withDefaults({headers: {\n          'Accept': 'application/json',\n          'X-Authorization': JSON.stringify(this.authToken)\n        }})\n        .withBaseUrl('http://www.myshootinglog.com:8080/');\n    });\n    this.http = _http;\n    this.subscribe();\n  }\n\n  subscribe(){\n    let self = this;\n    this.eventAggregator.subscribe('scorecard.changed', payload => {\n      self.handleScorecardChanged();\n    });\n    this.eventAggregator.subscribe('logout', payload => {\n      self.handleLogout();\n    });\n    this.eventAggregator.subscribe('viewActivate', payload => {\n      self.handleViewActivate();\n    });\n    //Bow handlers\n    this.eventAggregator.subscribe('bow.add', payload => {\n      self.handleBowAdd(payload);\n    });\n    this.eventAggregator.subscribe('bow.update', payload => {\n      self.handleBowUpdate(payload);\n    });\n    this.eventAggregator.subscribe('bow.delete', payload => {\n      self.handleBowDelete(payload);\n    });\n    //Scorecard\n    this.eventAggregator.subscribe('round.add', payload => {\n      self.handleRoundAdd(payload);\n    });\n    this.eventAggregator.subscribe('round.delete', payload => {\n      self.handleRoundDelete(payload);\n    });\n    this.eventAggregator.subscribe('round.update', payload => {\n      self.handleRoundUpdate(payload);\n    });\n    this.eventAggregator.subscribe('bowStore.stale', payload => {\n      self.handleBowStoreStale(payload);\n    });\n    this.eventAggregator.subscribe('roundStore.stale', payload => {\n      self.handleRoundStoreStale(payload);\n    });\n    this.eventAggregator.subscribe('user.authenticated', payload => {\n      self.handleUserAuthenticated(payload);\n    });\n  }\n\n  /*************************\n   * GLOBAL EVENT HANDLERS *\n   *************************/\n  handleViewActivate() {\n    //Push scorecard into store\n    this.user = this.getUserInSession();\n    this.authToken = JSON.parse(sessionStorage.getItem('auth-token'));\n  }\n\n  handleUserAuthenticated(token) {\n    this.authToken = token;\n    sessionStorage.setItem('auth-token', JSON.stringify(token));\n    this.saveStore();\n  }\n\n  handleLogout() {\n    this.user = null;\n    this.authToken = null;\n  }\n  \n  handleScorecardChanged() {\n    var user = this.getUserInSession();\n    var self = this;\n    //Hack to make mongoose behave.  Need to clean this up at the API side\n    this.scorecard._id = undefined;\n    this.scorecard.id = undefined;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('scorecard/' + user.userId, {\n        method: 'put',\n        body: JSON.stringify(self.scorecard)\n      }).then(function(results) {\n        resolve(results);\n      })\n    });\n  }\n  \n  /************************\n   * ROUND EVENT HANDLERS *\n   ************************/\n  handleRoundDelete(roundId) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/rounds/' + roundId, {method: 'delete'})\n      .then(function(results) {\n        self.eventAggregator.publish('roundStore.stale');\n      });\n  }\n  \n  handleRoundAdd(round) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/rounds', {\n      method: 'post',\n      body: JSON.stringify(round)\n    }).then(function(results) {\n        self.eventAggregator.publish('roundStore.stale');\n      });\n  }\n  \n  handleRoundUpdate(round) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/rounds/' + round._id, {\n      method: 'put',\n      body: JSON.stringify(round)\n    }).then(function(results) {\n        self.eventAggregator.publish('roundStore.stale');\n      });\n  }\n  \n  handleRoundStoreStale() {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/rounds')\n      .then(response => response.json())\n      .then(function(rounds) {\n        self.scorecard.rounds = rounds;\n        });\n  }\n  \n  /**********************\n   * BOW EVENT HANDLERS *\n   **********************/\n  handleBowAdd(bow) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/bows', {\n      method: 'post',\n      body: JSON.stringify(bow)\n    }).then(function(results) {\n        self.eventAggregator.publish('bowStore.stale');\n      });\n  }\n\n  handleBowUpdate(bow) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/bows/' + bow._id, {\n      method: 'put',\n      body: JSON.stringify(bow)\n    }).then(function(results) {\n        self.eventAggregator.publish('bowStore.stale');\n      });\n  }\n\n  handleBowDelete(bowId) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/bows/' + bowId, {method: 'delete'})\n      .then(function(results) {\n        self.eventAggregator.publish('bowStore.stale');\n      });\n  }\n  \n  handleBowStoreStale() {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/bows')\n      .then(response => response.json())\n      .then(function(bows) {\n        self.scorecard.bows = bows;\n      });\n  }\n  \n  /***********\n   * METHODS *\n   ***********/\n  getScorecard(userId) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      if(self.scorecard == null || self.scorecard == undefined) {\n        \n        self.http.fetch('scorecard/'+ userId)\n        .then(response => response.json())\n        .then(function(results) {\n          resolve(results);\n        })\n        \n      } else {\n        resolve(self.scorecard);\n      }\n    });\n  }\n\n  getBow(bowId) {\n    var user = this.getUserInSession();\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('scorecard/' + user.userId + '/bows/' + bowId)\n      .then(response => response.json())\n      .then(function(bow) {\n        resolve(bow);\n        });\n    });\n  }\n  \n  getRound(roundId) {\n    var user = this.getUserInSession();\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('scorecard/' + user.userId + '/rounds/' + roundId)\n      .then(response => response.json())\n      .then(function(round) {\n        resolve(round);\n        });\n    });\n  }\n\n  getLast30Stats() {\n    var user = this.getUserInSession();\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('stats/' + user.userId + '/last30')\n        .then(response => response.json())\n        .then(function(round) {\n          resolve(round);\n        });\n    });\n  }\n\n  getLifetimeStats() {\n    var user = this.getUserInSession();\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('stats/' + user.userId + '/lifetime')\n        .then(response => response.json())\n        .then(function(round) {\n          resolve(round);\n        });\n    });\n  }\n\n  /*********************\n   *       USER\n   *********************/\n  authenticateUser(_email, _password) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('auth', {\n        method: 'post',\n        body: JSON.stringify({'email': _email, 'password': _password })\n      }).then(response => response.json())\n       .then(function(results) {\n        self.eventAggregator.publish('user.authenticated', results);\n        resolve(results);\n      }).catch(error => {\n        if(error.status === 401) {\n          reject(\"Invalid username or password\");\n        } else {\n          reject(\"Unknown error occurred during login.  Please try again later\");\n        }\n      });\n    });\n  }\n  \n  getUserInSession() {\n    var auth = JSON.parse(sessionStorage.getItem('auth-token'));\n    var usr = {isAuthenticated: false};\n    if(auth != null) {\n      usr.userId = auth.userId;\n      usr.isAuthenticated = true;\n    }\n    return usr;\n  }\n\n  saveStore() {\n    sessionStorage.store = JSON.stringify(this);\n  }\n\n  /**\n   * TODO: Kill this stupid method!\n   */\n  getUserDetails(user) {\n    let userDetails = {\n      name: '',\n      location: '',\n      image: ''\n    };\n    if(this.scorecard.user.userId === user.userId) {\n      userDetails.name =  this.scorecard.user.details.name;\n      userDetails.location =  this.scorecard.user.details.location;\n      userDetails.image =  this.scorecard.user.details.image;\n    }\n    return userDetails;\n  }\n\n  /**\n   * Created the Firebase account and returns the accountID which will be the key\n   * the API uses for accessing the users data\n   */\n  register(_email, _password) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('user', {\n        method: 'post',\n        body: JSON.stringify({'email': _email, 'password': _password })\n      }).then(response => response.json())\n        .then(usr => {\n        resolve(usr);\n      }).catch(error => {\n        reject(error);\n      });\n    });\n  }\n  \n  /**\n   * After registration, the users scorecard must be initialized by POSTing a \n   * stub record to the API.  \n   */\n  initUserScorecard(user) {\n    var card = {\n      user: {\n        accountId: user._id,\n        email: user.email\n      },\n      rounds: [],\n      bows: []\n    }\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('scorecard', {\n        method: 'post',\n        body: JSON.stringify(card)\n      }).then(function(results) {\n        resolve(results);\n      })\n    });\n  }\n  \n\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport Store from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport _ from 'underscore';\nimport environment from '../environment';\nimport {HttpClient} from 'aurelia-http-client';\n\n@inject(Router, Store, EventAggregator)\nexport class Round {\n  heading = 'Round';\n  roundTypes = [\n    'FITA 18',\n    'FITA 25',\n    'FITA 30',\n    'FITA 50',\n    'FITA 70',\n    'FITA 90',\n    'Other'\n  ];\n  newEndScore = 30;\n  newArrowCount = 3;\n  round = {};\n  \n  constructor(router, _store, _EventAggregator){\n    this.appRouter = router;\n    this.store = _store;\n    this.eventAggregator = _EventAggregator;\n    var self = this;\n    this.eventAggregator.subscribe('roundDate.send', payload => {\n      self.handleDateChange(payload);\n    });\n    this.eventAggregator.subscribe('round.ends.change', payload => {\n      self.handleRoundEndsChange(payload);\n    });\n    this.client = new HttpClient().configure(x => {\n      x.withBaseUrl(environment.API_URL);\n      x.withHeader('x-authorization',this.store.authToken.token);\n    });\n    \n  }\n\n  activate(parms, routeConfig) {\n    this.eventAggregator.publish('viewActivate');\n    var self = this;\n    this.client.get(\"/user/\" + this.store.authToken.userId + \"/bows\")\n      .then(data => {\n        self.bows = JSON.parse(data.response);\n        return self.client.get(\"/roundtype\");\n      })\n      .then(results => {\n        self.roundTypes = JSON.parse(results.response);\n        if(parms.id != undefined && parms.id !== \"-1\") {\n          this.client.get(\"/round/\" + parms.id)\n            .then(data => {\n              self.round = JSON.parse(data.response);\n            });\n        } else {\n          self.round = {\n            round_date: new Date(),\n            total_score: 30,\n            ends: [{end_number:1, end_score:30, arrow_count: 3}]\n          }\n          if(self.bows.length > 0) {\n            self.round.bow_id = self.bows[0].id;\n          }\n          if(self.roundTypes.length > 0) {\n            self.round.round_type = self.roundTypes[0].id;\n          }\n        }\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n        }\n\n      });\n  }\n\n  addEnd() {\n    this.round.ends.push({end_number:this.round.ends.length + 1, arrow_count: this.newArrowCount, end_score:this.newEndScore});\n    this.eventAggregator.publish('round.ends.change', true);\n  }\n  \n  deleteEnd(end) {\n    var deletedEnd = _.find(this.round.ends, function(e){return e._id == end._id});\n    if(deletedEnd != undefined) {\n      this.round.ends = _.without(this.round.ends, deletedEnd);\n    }\n    var roundNumber = 1;\n    this.round.ends.forEach(function(end){\n      end.end_number = roundNumber++;\n    })\n    this.eventAggregator.publish('round.ends.change', true);\n  }\n  \n  endChanged() {\n    this.eventAggregator.publish('round.ends.change', true);\n  }\n  \n  save() {\n    this.round.total_score = this.calculateRoundScore(this.round);\n    \n    if(this.round.id === undefined)\n    {\n      this.addRound();\n    } else {\n      this.updateRound();\n    }\n  }\n\n  addRound() {\n    this.round.member_id =   this.store.authToken.userId;\n    this.client.post(\"/round\", JSON.stringify(this.round))\n      .then(data => {\n        self.round = JSON.parse(data.response);\n        this.appRouter.navigateBack();\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n        }\n\n      });\n  }\n\n  updateRound() {\n    this.client.put(\"/round/\" + this.round.id, JSON.stringify(this.round))\n      .then(data => {\n        self.round = JSON.parse(data.response);\n        this.appRouter.navigateBack();\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n        }\n\n      });\n  }\n\n  handleRoundEndsChange(action, end) {\n    this.round.total_score = this.calculateRoundScore(this.round);\n  }\n  \n  calculateRoundScore(_round) {\n    var scores = _.map(_round.ends, function(end) {\n      return Number(end.end_score);\n    });\n    return scores.reduce(\n      function(total, num){ return ((num)?(total + num):0) }\n      , 0);\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport DataLayer from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport environment from '../environment';\nimport {HttpClient} from 'aurelia-http-client';\n\n@inject(Router, DataLayer, EventAggregator)\nexport class Welcome{\n\n  heading = 'Your scorecard';\n  \n  constructor(_router, _data, _eventAggregator){\n    this.appRouter = _router;\n    this.store = _data;\n    this.eventAggregator = _eventAggregator;\n    this.client = new HttpClient().configure(x => {\n      x.withBaseUrl(environment.API_URL);\n      x.withHeader('x-authorization',this.store.authToken.token);\n    });\n  }\n\n  newRound() {\n    this.appRouter.navigateToRoute('round', { id: -1 });\n  }\n\n  editRound(round) {\n    this.appRouter.navigateToRoute('round', { id: round.id });\n  }\n\n  deleteRound(round) {\n    var self = this;\n    if(confirm(\"Are you sure you want to delete this round?\")) {\n      this.client.delete(\"/round/\" + round.id)\n        .then(data => {\n          self.refreshRounds();\n        })\n        .catch(error => {\n          if(error.status === 403) {\n            alert('Session timeout, please log in again');\n            this.store.clearStore();\n            this.router.navigateToRoute('login');\n          } else {\n            this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n          }\n\n        });\n    }\n  }\n  \n  activate() {\n    this.eventAggregator.publish('viewActivate');\n    this.refreshRounds();\n  }\n\n  refreshRounds() {\n    var self = this;\n    this.client.get(\"/user/\" + this.store.authToken.userId + \"/rounds\")\n      .then(data => {\n        self.rounds = JSON.parse(data.response);\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n        }\n\n      });\n  }\n}\n\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport DataLayer from 'common/shooting-log-store';\n\n@inject(Router, DataLayer, EventAggregator)\nexport class Login {\n  \n  errorMessage = null;\n  \n  user = {\n      email: '',\n      password: ''\n  }\n  \n  constructor(router, _dl, _eventAggregator){\n    this.appRouter = router;\n    this.store = _dl;\n    this.eventAggregator = _eventAggregator;\n  }\n  \n  loginUser() {\n    var self = this;\n    self.errorMessage = null;\n    this.store.authenticateUser(this.user.email, this.user.password)\n      .then(user => {\n        if(user) {\n          self.eventAggregator.publish('login.success', true);\n          self.appRouter.navigateToRoute('home');\n        }\n      }).catch(error => {\n        self.errorMessage = error;\n      });\n  }\n}\n","import {computedFrom, inject, URL} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport ShootingLogStore from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(Router, ShootingLogStore, EventAggregator)\nexport class Profile {\n\n  file;\n\n  constructor(router, shootingLogStore, eventAggregator) {\n    this.appRouter = router;\n    this.store = shootingLogStore;\n    this.dispatcher = eventAggregator;\n  }\n\n  activate() {\n    this.dispatcher.publish('viewActivate');\n  }\n\n  saveProfile() {\n    this.dispatcher.publish('scorecard.changed');\n  }\n\n  embedFile() {\n    var self = this;\n    if(this.file) {\n      var reader = new FileReader();\n      reader.onload = (function(theFile) {\n        return function(e) {\n          self.store.user.image = e.target.result;\n        };\n      })(this.file[0]);\n      reader.readAsDataURL(this.file[0]);\n    }\n\n  }\n}\n\nexport class BlobToUrlValueConverter {\n  toView(blob) {\n    if(blob)\n      return window.URL.createObjectURL(blob[0]);\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport DataLayer from 'common/shooting-log-store';\n\n@inject(Router, DataLayer)\nexport class Login {\n  \n  errorMessage = null;\n  user = {\n      email: '',\n      password: '',\n      confpassword: ''\n  }\n  \n  constructor(router, _dl){\n    this.appRouter = router;\n    this.dataLayer = _dl;\n  }\n  \n  register() {\n    if(this.user.password == this.user.confpassword) {\n        var self = this;\n        self.errorMessage = null;\n        this.dataLayer.register(this.user.email, this.user.password)\n          .then(usr => {\n            if(usr) {\n              self.dataLayer.initUserScorecard(usr).then(function(res){\n                self.appRouter.navigateToRoute('login')\n              }, function(err) {\n                self.errorMessage = \"ERROR: \" + err;\n              });\n            }  \n        }).catch(error => {\n          self.errorMessage = 'ERROR: ' + error;\n        });    \n    } else {\n      this.message = 'ERROR: Passwords do not match';\n    }\n  }\n}\n","import {bindable} from 'aurelia-framework';\nimport {inject} from 'aurelia-framework';\nimport Store from 'common/shooting-log-store';\n\n@inject(Store)\nexport class NavBar {\n  // User isn't authenticated by default\n  @bindable router = null;\n\n  constructor(store) {\n    this.store = store;\n  }\n\n  // We can check if the user is authenticated\n  // to conditionally hide or show nav bar items\n  get isAuthenticated() {\n    var auth = JSON.parse(sessionStorage.getItem('auth-token'));\n    return (auth !== null);\n  }\n\n  logout() {\n    sessionStorage.clear();\n    this.store.user = null;\n    this.store.authToken = null;\n    this.router.navigateToRoute('login');\n  }\n}\n","import moment from 'moment';\n/**\n * Created by tim on 9/30/2016.\n */\nexport class DateFormatValueConverter {\n  toView(value, format) {\n    return moment(value).format(format);\n  }\n  fromView(str, format){\n    return moment(str, format);\n  }\n}\n",null,null,null,null,null,null,null,null,null,null],"sourceRoot":"..\\src"}