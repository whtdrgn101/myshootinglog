{"version":3,"sources":["app.js","environment.js","main.js","welcome.js","bow/bow.js","bow/bow_list.js","common/shooting-log-store.js","round/round.js","round/scorecard.js","resources/index.js","user/login.js","user/profile.js","user/register.js","resources/elements/nav-bar.js","resources/value-converters/dateFormatValueConverter.js","C:/Users/tim/Documents/dev/myshootinglog/src/app.html","C:/Users/tim/Documents/dev/myshootinglog/src/welcome.html","C:/Users/tim/Documents/dev/myshootinglog/src/bow/bow.html","C:/Users/tim/Documents/dev/myshootinglog/src/bow/bow_list.html","C:/Users/tim/Documents/dev/myshootinglog/src/round/round.html","C:/Users/tim/Documents/dev/myshootinglog/src/round/scorecard.html","C:/Users/tim/Documents/dev/myshootinglog/src/user/login.html","C:/Users/tim/Documents/dev/myshootinglog/src/user/profile.html","C:/Users/tim/Documents/dev/myshootinglog/src/user/register.html","C:/Users/tim/Documents/dev/myshootinglog/src/resources/elements/nav-bar.html"],"names":["App","_store","store","configureRouter","config","router","title","addPipelineStep","AuthorizeStep","map","route","name","moduleId","auth","nav","run","navigationInstruction","next","getAllInstructions","some","i","JSON","parse","sessionStorage","getItem","cancel","debug","testing","API_URL","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","Welcome","eventAggregator","heading","last30Stats","lifetimeStats","activate","parms","routeConfig","publish","self","getLast30Stats","stats","getLifetimeStats","Bow","_eventAggregator","bow","bowTypes","appRouter","client","x","withBaseUrl","withHeader","authToken","token","getBowTypes","id","undefined","get","data","response","catch","error","status","alert","clearStore","navigateToRoute","save","addBow","updateBow","put","stringify","navigateBack","member_id","userId","post","BowList","_router","_data","newBow","editBow","deleteBow","confirm","delete","refreshBows","bows","UpperValueConverter","toView","value","toUpperCase","ShootingLogStore","_http","user","scorecard","errorMessage","round","useStandardConfiguration","withDefaults","headers","http","subscribe","handleScorecardChanged","handleLogout","handleViewActivate","handleBowAdd","payload","handleBowUpdate","handleBowDelete","handleRoundAdd","handleRoundDelete","handleRoundUpdate","handleBowStoreStale","handleRoundStoreStale","handleUserAuthenticated","getUserInSession","setItem","_id","resolve","reject","fetch","method","body","results","roundId","json","rounds","bowId","getScorecard","getBow","getRound","authenticateUser","_email","_password","usr","isAuthenticated","getUserDetails","userDetails","location","image","details","register","initUserScorecard","card","accountId","email","Round","_EventAggregator","roundTypes","newEndScore","handleDateChange","handleRoundEndsChange","r","recordedDate","Date","score","ends","number","addEnd","push","length","deleteEnd","end","deletedEnd","find","e","without","roundNumber","forEach","endChanged","roundScore","calculateRoundScore","date","action","_round","scores","Number","reduce","total","num","dataLayer","newRound","editRound","deleteRound","Login","_dl","password","loginUser","Profile","shootingLogStore","dispatcher","saveProfile","embedFile","file","reader","FileReader","onload","theFile","target","result","readAsDataURL","BlobToUrlValueConverter","blob","window","URL","createObjectURL","confpassword","res","err","message","NavBar","logout","clear","DateFormatValueConverter","format","fromView","str"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;MAKaA,cAAAA,cADZ;AAGC,iBAAYC,MAAZ,EAAoB;AAAA;;AAClB,WAAKC,KAAL,GAAaD,MAAb;AACD;;kBAEDE,2CAAgBC,QAAQC,QAAQ;AAC9BD,aAAOE,KAAP,GAAe,iBAAf;AACAF,aAAOG,eAAP,CAAuB,WAAvB,EAAoCC,aAApC;AACAJ,aAAOK,GAAP,CAAW,CACT,EAAEC,OAAO,CAAC,EAAD,EAAK,SAAL,CAAT,EAA0BC,MAAM,MAAhC,EAA6CC,UAAU,SAAvD,EAA0EC,MAAM,IAAhF,EAAuFC,KAAK,IAA5F,EAAmGR,OAAO,MAA1G,EADS,EAET,EAAEI,OAAO,CAAC,WAAD,CAAT,EAA0BC,MAAM,WAAhC,EAA6CC,UAAU,iBAAvD,EAA0EC,MAAM,IAAhF,EAAuFC,KAAK,IAA5F,EAAmGR,OAAO,WAA1G,EAFS,EAGT,EAAEI,OAAO,CAAC,OAAD,CAAT,EAA0BC,MAAM,OAAhC,EAA6CC,UAAU,aAAvD,EAA0EC,MAAM,IAAhF,EAAuFC,KAAK,KAA5F,EAAmGR,OAAO,OAA1G,EAHS,EAIT,EAAEI,OAAO,CAAC,UAAD,CAAT,EAA0BC,MAAM,UAAhC,EAA6CC,UAAU,cAAvD,EAA0EC,MAAM,IAAhF,EAAuFC,KAAK,IAA5F,EAAmGR,OAAO,MAA1G,EAJS,EAKT,EAAEI,OAAO,CAAC,KAAD,CAAT,EAA0BC,MAAM,KAAhC,EAA6CC,UAAU,SAAvD,EAA0EC,MAAM,IAAhF,EAAuFC,KAAK,KAA5F,EAAmGR,OAAO,aAA1G,EALS,EAMT,EAAEI,OAAO,CAAC,SAAD,CAAT,EAA0BC,MAAM,SAAhC,EAA6CC,UAAU,cAAvD,EAA0EC,MAAM,IAAhF,EAAuFC,KAAK,IAA5F,EAAmGR,OAAO,SAA1G,EANS,EAOT,EAAEI,OAAO,CAAC,OAAD,CAAT,EAA0BC,MAAM,OAAhC,EAA6CC,UAAU,YAAvD,EAA0EC,MAAM,KAAhF,EAAuFC,KAAK,KAA5F,EAAmGR,OAAO,OAA1G,EAPS,EAQT,EAAEI,OAAO,CAAC,UAAD,CAAT,EAA0BC,MAAM,UAAhC,EAA6CC,UAAU,eAAvD,EAA0EC,MAAM,KAAhF,EAAuFC,KAAK,KAA5F,EAAmGR,OAAO,UAA1G,EARS,CAAX;;AAWA,WAAKD,MAAL,GAAcA,MAAd;AACD;;;;;MAGGG;;;;;4BAEJO,mBAAIC,uBAAuBC,MAAM;AAI/B,UAAID,sBAAsBE,kBAAtB,GAA2CC,IAA3C,CAAgD;AAAA,eAAKC,EAAEhB,MAAF,CAASS,IAAd;AAAA,OAAhD,CAAJ,EAAyE;AACvE,YAAIA,OAAOQ,KAAKC,KAAL,CAAWC,eAAeC,OAAf,CAAuB,YAAvB,CAAX,CAAX;AACA,YAAGX,QAAQ,IAAX,EAAiB;AACf,iBAAOI,KAAKQ,MAAL,CAAY,4BAAa,OAAb,CAAZ,CAAP;AACD;AACF;;AAED,aAAOR,MAAP;AACD;;;;;;;;;;;oBC3CY;AACbS,WAAO,IADM;AAEbC,aAAS,IAFI;AAGbC,aAAS;AAHI;;;;;;;;UCUCC,YAAAA;;;;;;;;;;AANhBC,UAAQ1B,MAAR,CAAe;AACb2B,cAAU;AACRC,wBAAkB;AADV;AADG,GAAf;;AAMO,WAASH,SAAT,CAAmBI,OAAnB,EAA4B;AACjCA,YAAQC,GAAR,CACGC,qBADH,GAEGC,OAFH,CAEW,WAFX;;AAIA,QAAI,sBAAYV,KAAhB,EAAuB;AACrBO,cAAQC,GAAR,CAAYG,kBAAZ;AACD;;AAED,QAAI,sBAAYV,OAAhB,EAAyB;AACvBM,cAAQC,GAAR,CAAYI,MAAZ,CAAmB,iBAAnB;AACD;;AAEDL,YAAQM,KAAR,GAAgBC,IAAhB,CAAqB;AAAA,aAAMP,QAAQQ,OAAR,EAAN;AAAA,KAArB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MClBYC,kBAAAA,kBADZ;AAMC,qBAAYrC,MAAZ,EAAoBH,KAApB,EAA2ByC,eAA3B,EAA4C;AAAA;;AAAA,WAJ5CC,OAI4C,GAJlC,2BAIkC;AAAA,WAH5CC,WAG4C,GAH9B,EAG8B;AAAA,WAF5CC,aAE4C,GAF5B,EAE4B;;AAC1C,WAAKzC,MAAL,GAAcA,MAAd;AACA,WAAKH,KAAL,GAAaA,KAAb;AACA,WAAKyC,eAAL,GAAuBA,eAAvB;AACD;;sBAEDI,6BAASC,OAAOC,aAAa;AAC3B,WAAKN,eAAL,CAAqBO,OAArB,CAA6B,cAA7B;AACA,UAAIC,OAAO,IAAX;AACA,WAAKjD,KAAL,CAAWkD,cAAX,GAA4BZ,IAA5B,CAAiC,UAASa,KAAT,EAAe;AAC9CF,aAAKN,WAAL,GAAmBQ,MAAM,CAAN,CAAnB;AACD,OAFD;AAGA,WAAKnD,KAAL,CAAWoD,gBAAX,GAA8Bd,IAA9B,CAAmC,UAASa,KAAT,EAAe;AAChDF,aAAKL,aAAL,GAAqBO,MAAM,CAAN,CAArB;AACD,OAFD;AAGD;;;;0BAEiB,CAEjB;;;0BAEiB,CAEjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC1BUE,cAAAA,cADZ;AAaC,iBAAYlD,MAAZ,EAAoBJ,MAApB,EAA4BuD,gBAA5B,EAA6C;AAAA;;AAAA;;AAAA,WAV7CZ,OAU6C,GAVnC,aAUmC;AAAA,WAT7Ca,GAS6C,GATvC,EASuC;AAAA,WAR7CC,QAQ6C,GARlC,CACT,UADS,EAET,UAFS,EAGT,SAHS,EAIT,SAJS,EAKT,MALS,EAMT,OANS,CAQkC;;AAC3C,WAAKC,SAAL,GAAiBtD,MAAjB;AACA,WAAKH,KAAL,GAAaD,MAAb;AACA,WAAK0C,eAAL,GAAuBa,gBAAvB;AACA,WAAKI,MAAL,GAAc,oCAAiB/B,SAAjB,CAA2B,aAAK;AAC5CgC,UAAEC,WAAF,CAAc,sBAAYlC,OAA1B;AACAiC,UAAEE,UAAF,CAAa,iBAAb,EAA+B,MAAK7D,KAAL,CAAW8D,SAAX,CAAqBC,KAApD;AACD,OAHa,CAAd;AAID;;kBAEDlB,6BAASC,OAAOC,aAAa;AAAA;;AAC3B,WAAKN,eAAL,CAAqBO,OAArB,CAA6B,cAA7B;AACA,WAAKgB,WAAL;AACA,UAAIf,OAAO,IAAX;AACA,UAAGH,MAAMmB,EAAN,IAAYC,SAAZ,IAAyBpB,MAAMmB,EAAN,KAAa,IAAzC,EAA+C;AAC7C,aAAKP,MAAL,CAAYS,GAAZ,CAAgB,UAAUrB,MAAMmB,EAAhC,EACG3B,IADH,CACQ,gBAAQ;AACZ,iBAAKiB,GAAL,GAAWpC,KAAKC,KAAL,CAAWgD,KAAKC,QAAhB,CAAX;AACD,SAHH,EAIGC,KAJH,CAIS,iBAAS;AACd,cAAGC,MAAMC,MAAN,KAAiB,GAApB,EAAyB;AACvBC,kBAAM,sCAAN;AACA,mBAAKzE,KAAL,CAAW0E,UAAX;AACA,mBAAKvE,MAAL,CAAYwE,eAAZ,CAA4B,OAA5B;AACD,WAJD,MAIO;AACL,mBAAKJ,KAAL,GAAa,sFAAb;AACD;AAEF,SAbH;AAcD;AACF;;kBAEDK,uBAAO;AACL,UAAG,KAAKrB,GAAL,CAASU,EAAT,KAAgBC,SAAnB,EACA;AACE,aAAKW,MAAL;AACD,OAHD,MAGO;AACL,aAAKC,SAAL;AACD;AAEF;;kBAEDA,iCAAY;AAAA;;AACV,UAAI7B,OAAO,IAAX;AACA,WAAKS,MAAL,CAAYqB,GAAZ,CAAgB,UAAU,KAAKxB,GAAL,CAASU,EAAnC,EAAuC9C,KAAK6D,SAAL,CAAe,KAAKzB,GAApB,CAAvC,EACGjB,IADH,CACQ,gBAAQ;AACZW,aAAKM,GAAL,GAAWpC,KAAKC,KAAL,CAAWgD,KAAKC,QAAhB,CAAX;AACA,eAAKZ,SAAL,CAAewB,YAAf;AACD,OAJH,EAKGX,KALH,CAKS,iBAAS;AACd,YAAGC,MAAMC,MAAN,KAAiB,GAApB,EAAyB;AACvBC,gBAAM,sCAAN;AACA,iBAAKzE,KAAL,CAAW0E,UAAX;AACA,iBAAKvE,MAAL,CAAYwE,eAAZ,CAA4B,OAA5B;AACD,SAJD,MAIO;AACL,iBAAKJ,KAAL,GAAa,sFAAb;AACD;AAEF,OAdH;AAeD;;kBAEDM,2BAAS;AAAA;;AACP,UAAI5B,OAAO,IAAX;AACA,WAAKM,GAAL,CAAS2B,SAAT,GAAqB,KAAKlF,KAAL,CAAW8D,SAAX,CAAqBqB,MAA1C;AACA,WAAKzB,MAAL,CAAY0B,IAAZ,CAAiB,MAAjB,EAAyBjE,KAAK6D,SAAL,CAAe,KAAKzB,GAApB,CAAzB,EACGjB,IADH,CACQ,gBAAQ;AACZW,aAAKM,GAAL,GAAWpC,KAAKC,KAAL,CAAWgD,KAAKC,QAAhB,CAAX;AACA,eAAKZ,SAAL,CAAewB,YAAf;AACD,OAJH,EAKGX,KALH,CAKS,iBAAS;AACd,YAAGC,MAAMC,MAAN,KAAiB,GAApB,EAAyB;AACvBC,gBAAM,sCAAN;AACA,iBAAKzE,KAAL,CAAW0E,UAAX;AACA,iBAAKvE,MAAL,CAAYwE,eAAZ,CAA4B,OAA5B;AACD,SAJD,MAIO;AACL,iBAAKJ,KAAL,GAAa,sFAAb;AACD;AAEF,OAdH;AAeD;;kBAEDP,qCAAc;AAAA;;AACZ,UAAIf,OAAO,IAAX;AACA,WAAKS,MAAL,CAAYS,GAAZ,CAAgB,UAAhB,EAA4BhD,KAAK6D,SAAL,CAAe,KAAKzB,GAApB,CAA5B,EACGjB,IADH,CACQ,gBAAQ;AACZW,aAAKO,QAAL,GAAgBrC,KAAKC,KAAL,CAAWgD,KAAKC,QAAhB,CAAhB;AACD,OAHH,EAIGC,KAJH,CAIS,iBAAS;AACd,YAAGC,MAAMC,MAAN,KAAiB,GAApB,EAAyB;AACvBC,gBAAM,sCAAN;AACA,iBAAKzE,KAAL,CAAW0E,UAAX;AACA,iBAAKvE,MAAL,CAAYwE,eAAZ,CAA4B,OAA5B;AACD,SAJD,MAIO;AACL,iBAAKJ,KAAL,GAAa,2FAAb;AACD;AAEF,OAbH;AAcD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC7GUc,kBAAAA,kBADZ;AAGC,qBAAYC,OAAZ,EAAqBC,KAArB,EAA4BjC,gBAA5B,EAA6C;AAAA;;AAAA;;AAAA,WAW7CZ,OAX6C,GAWnC,WAXmC;;AAC3C,WAAKe,SAAL,GAAiB6B,OAAjB;AACA,WAAKtF,KAAL,GAAauF,KAAb;AACA,WAAK9C,eAAL,GAAuBa,gBAAvB;AACA,WAAKI,MAAL,GAAc,oCAAiB/B,SAAjB,CAA2B,aAAK;AAC5CgC,UAAEC,WAAF,CAAc,sBAAYlC,OAA1B;AACAiC,UAAEE,UAAF,CAAa,iBAAb,EAA+B,MAAK7D,KAAL,CAAW8D,SAAX,CAAqBC,KAApD;AACD,OAHa,CAAd;AAKD;;sBAIDyB,2BAAS;AACP,WAAK/B,SAAL,CAAekB,eAAf,CAA+B,KAA/B,EAAsC,EAAEV,IAAI,CAAC,CAAP,EAAtC;AACD;;sBAEDwB,2BAAQlC,KAAK;AACX,WAAKE,SAAL,CAAekB,eAAf,CAA+B,KAA/B,EAAsC,EAAEV,IAAIV,IAAIU,EAAV,EAAtC;AACD;;sBAEDyB,+BAAUnC,KAAK;AAAA;;AACb,UAAIN,OAAO,IAAX;AACA,UAAG0C,QAAQ,2CAAR,CAAH,EAAyD;AACvD,aAAKjC,MAAL,CAAYkC,MAAZ,CAAmB,UAAUrC,IAAIU,EAAjC,EACG3B,IADH,CACQ,gBAAQ;AACZW,eAAK4C,WAAL;AACD,SAHH,EAIGvB,KAJH,CAIS,iBAAS;AACd,cAAGC,MAAMC,MAAN,KAAiB,GAApB,EAAyB;AACvBC,kBAAM,sCAAN;AACA,mBAAKzE,KAAL,CAAW0E,UAAX;AACA,mBAAKvE,MAAL,CAAYwE,eAAZ,CAA4B,OAA5B;AACD,WAJD,MAIO;AACL,mBAAKJ,KAAL,GAAa,sFAAb;AACD;AAEF,SAbH;AAcD;AACF;;sBAED1B,+BAAW;AACT,WAAKJ,eAAL,CAAqBO,OAArB,CAA6B,cAA7B;AACA,WAAK6C,WAAL;AACD;;sBAEDA,qCAAc;AAAA;;AACZ,UAAI5C,OAAO,IAAX;AACA,WAAKS,MAAL,CAAYS,GAAZ,CAAgB,WAAW,KAAKnE,KAAL,CAAW8D,SAAX,CAAqBqB,MAAhC,GAAyC,OAAzD,EACG7C,IADH,CACQ,gBAAQ;AACZW,aAAK6C,IAAL,GAAY3E,KAAKC,KAAL,CAAWgD,KAAKC,QAAhB,CAAZ;AACD,OAHH,EAIGC,KAJH,CAIS,iBAAS;AACd,YAAGC,MAAMC,MAAN,KAAiB,GAApB,EAAyB;AACvBC,gBAAM,sCAAN;AACA,iBAAKzE,KAAL,CAAW0E,UAAX;AACA,iBAAKvE,MAAL,CAAYwE,eAAZ,CAA4B,OAA5B;AACD,SAJD,MAIO;AACL,iBAAKJ,KAAL,GAAa,sFAAb;AACD;AAEF,OAbH;AAcD;;;;;MAGUwB,8BAAAA;;;;;kCACXC,yBAAOC,OAAM;AACX,aAAOA,SAASA,MAAMC,WAAN,EAAhB;AACD;;;;;;;;;;;;;;;;;;;;;MCzEkBC,2BADpB;AAUC,8BAAY7C,gBAAZ,EAA8B8C,KAA9B,EAAoC;AAAA;;AAAA;;AAAA,WAPpCC,IAOoC,GAP7B,IAO6B;AAAA,WANpCC,SAMoC,GANxB,IAMwB;AAAA,WALpCC,YAKoC,GALrB,IAKqB;AAAA,WAJpCC,KAIoC,GAJ5B,IAI4B;AAAA,WAHpCjD,GAGoC,GAH9B,IAG8B;AAAA,WAFpCO,SAEoC,GAFxB,IAEwB;;AAClC,WAAKrB,eAAL,GAAuBa,gBAAvB;AACA8C,YAAMzE,SAAN,CAAgB,kBAAU;AACxBzB,eACGuG,wBADH,GAEGC,YAFH,CAEgB,EAACC,SAAS;AACtB,sBAAU,kBADY;AAEtB,+BAAmBxF,KAAK6D,SAAL,CAAe,MAAKlB,SAApB;AAFG,WAAV,EAFhB,EAMGF,WANH,CAMe,oCANf;AAOD,OARD;AASA,WAAKgD,IAAL,GAAYR,KAAZ;AACA,WAAKS,SAAL;AACD;;+BAEDA,iCAAW;AACT,UAAI5D,OAAO,IAAX;AACA,WAAKR,eAAL,CAAqBoE,SAArB,CAA+B,mBAA/B,EAAoD,mBAAW;AAC7D5D,aAAK6D,sBAAL;AACD,OAFD;AAGA,WAAKrE,eAAL,CAAqBoE,SAArB,CAA+B,QAA/B,EAAyC,mBAAW;AAClD5D,aAAK8D,YAAL;AACD,OAFD;AAGA,WAAKtE,eAAL,CAAqBoE,SAArB,CAA+B,cAA/B,EAA+C,mBAAW;AACxD5D,aAAK+D,kBAAL;AACD,OAFD;;AAIA,WAAKvE,eAAL,CAAqBoE,SAArB,CAA+B,SAA/B,EAA0C,mBAAW;AACnD5D,aAAKgE,YAAL,CAAkBC,OAAlB;AACD,OAFD;AAGA,WAAKzE,eAAL,CAAqBoE,SAArB,CAA+B,YAA/B,EAA6C,mBAAW;AACtD5D,aAAKkE,eAAL,CAAqBD,OAArB;AACD,OAFD;AAGA,WAAKzE,eAAL,CAAqBoE,SAArB,CAA+B,YAA/B,EAA6C,mBAAW;AACtD5D,aAAKmE,eAAL,CAAqBF,OAArB;AACD,OAFD;;AAIA,WAAKzE,eAAL,CAAqBoE,SAArB,CAA+B,WAA/B,EAA4C,mBAAW;AACrD5D,aAAKoE,cAAL,CAAoBH,OAApB;AACD,OAFD;AAGA,WAAKzE,eAAL,CAAqBoE,SAArB,CAA+B,cAA/B,EAA+C,mBAAW;AACxD5D,aAAKqE,iBAAL,CAAuBJ,OAAvB;AACD,OAFD;AAGA,WAAKzE,eAAL,CAAqBoE,SAArB,CAA+B,cAA/B,EAA+C,mBAAW;AACxD5D,aAAKsE,iBAAL,CAAuBL,OAAvB;AACD,OAFD;AAGA,WAAKzE,eAAL,CAAqBoE,SAArB,CAA+B,gBAA/B,EAAiD,mBAAW;AAC1D5D,aAAKuE,mBAAL,CAAyBN,OAAzB;AACD,OAFD;AAGA,WAAKzE,eAAL,CAAqBoE,SAArB,CAA+B,kBAA/B,EAAmD,mBAAW;AAC5D5D,aAAKwE,qBAAL,CAA2BP,OAA3B;AACD,OAFD;AAGA,WAAKzE,eAAL,CAAqBoE,SAArB,CAA+B,oBAA/B,EAAqD,mBAAW;AAC9D5D,aAAKyE,uBAAL,CAA6BR,OAA7B;AACD,OAFD;AAGD;;+BAKDF,mDAAqB;AAEnB,WAAKX,IAAL,GAAY,KAAKsB,gBAAL,EAAZ;AACA,WAAK7D,SAAL,GAAiB3C,KAAKC,KAAL,CAAWC,eAAeC,OAAf,CAAuB,YAAvB,CAAX,CAAjB;AACD;;+BAEDoG,2DAAwB3D,OAAO;AAC7B,WAAKD,SAAL,GAAiBC,KAAjB;AACA1C,qBAAeuG,OAAf,CAAuB,YAAvB,EAAqCzG,KAAK6D,SAAL,CAAejB,KAAf,CAArC;AACD;;+BAEDgD,uCAAe;AACb,WAAKV,IAAL,GAAY,IAAZ;AACA,WAAKvC,SAAL,GAAiB,IAAjB;AACD;;+BAEDgD,2DAAyB;AACvB,UAAIT,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;;AAEA,WAAKqD,SAAL,CAAeuB,GAAf,GAAqB3D,SAArB;AACA,WAAKoC,SAAL,CAAerC,EAAf,GAAoBC,SAApB;AACA,aAAO,IAAItC,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK2D,IAAL,CAAUoB,KAAV,CAAgB,eAAe3B,KAAKlB,MAApC,EAA4C;AAC1C8C,kBAAQ,KADkC;AAE1CC,gBAAM/G,KAAK6D,SAAL,CAAe/B,KAAKqD,SAApB;AAFoC,SAA5C,EAGGhE,IAHH,CAGQ,UAAS6F,OAAT,EAAkB;AACxBL,kBAAQK,OAAR;AACD,SALD;AAMD,OAPM,CAAP;AAQD;;+BAKDb,+CAAkBc,SAAS;AACzB,UAAI/B,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;AACA,WAAK2D,IAAL,CAAUoB,KAAV,CAAgB,eAAe3B,KAAKlB,MAApB,GAA6B,UAA7B,GAA0CiD,OAA1D,EAAmE,EAACH,QAAQ,QAAT,EAAnE,EACG3F,IADH,CACQ,UAAS6F,OAAT,EAAkB;AACtBlF,aAAKR,eAAL,CAAqBO,OAArB,CAA6B,kBAA7B;AACD,OAHH;AAID;;+BAEDqE,yCAAeb,OAAO;AACpB,UAAIH,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;AACA,WAAK2D,IAAL,CAAUoB,KAAV,CAAgB,eAAe3B,KAAKlB,MAApB,GAA6B,SAA7C,EAAwD;AACtD8C,gBAAQ,MAD8C;AAEtDC,cAAM/G,KAAK6D,SAAL,CAAewB,KAAf;AAFgD,OAAxD,EAGGlE,IAHH,CAGQ,UAAS6F,OAAT,EAAkB;AACtBlF,aAAKR,eAAL,CAAqBO,OAArB,CAA6B,kBAA7B;AACD,OALH;AAMD;;+BAEDuE,+CAAkBf,OAAO;AACvB,UAAIH,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;AACA,WAAK2D,IAAL,CAAUoB,KAAV,CAAgB,eAAe3B,KAAKlB,MAApB,GAA6B,UAA7B,GAA0CqB,MAAMqB,GAAhE,EAAqE;AACnEI,gBAAQ,KAD2D;AAEnEC,cAAM/G,KAAK6D,SAAL,CAAewB,KAAf;AAF6D,OAArE,EAGGlE,IAHH,CAGQ,UAAS6F,OAAT,EAAkB;AACtBlF,aAAKR,eAAL,CAAqBO,OAArB,CAA6B,kBAA7B;AACD,OALH;AAMD;;+BAEDyE,yDAAwB;AACtB,UAAIpB,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;AACA,WAAK2D,IAAL,CAAUoB,KAAV,CAAgB,eAAe3B,KAAKlB,MAApB,GAA6B,SAA7C,EACG7C,IADH,CACQ;AAAA,eAAY+B,SAASgE,IAAT,EAAZ;AAAA,OADR,EAEG/F,IAFH,CAEQ,UAASgG,MAAT,EAAiB;AACrBrF,aAAKqD,SAAL,CAAegC,MAAf,GAAwBA,MAAxB;AACC,OAJL;AAKD;;+BAKDrB,qCAAa1D,KAAK;AAChB,UAAI8C,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;AACA,WAAK2D,IAAL,CAAUoB,KAAV,CAAgB,eAAe3B,KAAKlB,MAApB,GAA6B,OAA7C,EAAsD;AACpD8C,gBAAQ,MAD4C;AAEpDC,cAAM/G,KAAK6D,SAAL,CAAezB,GAAf;AAF8C,OAAtD,EAGGjB,IAHH,CAGQ,UAAS6F,OAAT,EAAkB;AACtBlF,aAAKR,eAAL,CAAqBO,OAArB,CAA6B,gBAA7B;AACD,OALH;AAMD;;+BAEDmE,2CAAgB5D,KAAK;AACnB,UAAI8C,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;AACA,WAAK2D,IAAL,CAAUoB,KAAV,CAAgB,eAAe3B,KAAKlB,MAApB,GAA6B,QAA7B,GAAwC5B,IAAIsE,GAA5D,EAAiE;AAC/DI,gBAAQ,KADuD;AAE/DC,cAAM/G,KAAK6D,SAAL,CAAezB,GAAf;AAFyD,OAAjE,EAGGjB,IAHH,CAGQ,UAAS6F,OAAT,EAAkB;AACtBlF,aAAKR,eAAL,CAAqBO,OAArB,CAA6B,gBAA7B;AACD,OALH;AAMD;;+BAEDoE,2CAAgBmB,OAAO;AACrB,UAAIlC,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;AACA,WAAK2D,IAAL,CAAUoB,KAAV,CAAgB,eAAe3B,KAAKlB,MAApB,GAA6B,QAA7B,GAAwCoD,KAAxD,EAA+D,EAACN,QAAQ,QAAT,EAA/D,EACG3F,IADH,CACQ,UAAS6F,OAAT,EAAkB;AACtBlF,aAAKR,eAAL,CAAqBO,OAArB,CAA6B,gBAA7B;AACD,OAHH;AAID;;+BAEDwE,qDAAsB;AACpB,UAAInB,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;AACA,WAAK2D,IAAL,CAAUoB,KAAV,CAAgB,eAAe3B,KAAKlB,MAApB,GAA6B,OAA7C,EACG7C,IADH,CACQ;AAAA,eAAY+B,SAASgE,IAAT,EAAZ;AAAA,OADR,EAEG/F,IAFH,CAEQ,UAASwD,IAAT,EAAe;AACnB7C,aAAKqD,SAAL,CAAeR,IAAf,GAAsBA,IAAtB;AACD,OAJH;AAKD;;+BAKD0C,qCAAarD,QAAQ;AACnB,UAAIlC,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,YAAG9E,KAAKqD,SAAL,IAAkB,IAAlB,IAA0BrD,KAAKqD,SAAL,IAAkBpC,SAA/C,EAA0D;;AAExDjB,eAAK2D,IAAL,CAAUoB,KAAV,CAAgB,eAAc7C,MAA9B,EACC7C,IADD,CACM;AAAA,mBAAY+B,SAASgE,IAAT,EAAZ;AAAA,WADN,EAEC/F,IAFD,CAEM,UAAS6F,OAAT,EAAkB;AACtBL,oBAAQK,OAAR;AACD,WAJD;AAMD,SARD,MAQO;AACLL,kBAAQ7E,KAAKqD,SAAb;AACD;AACF,OAZM,CAAP;AAaD;;+BAEDmC,yBAAOF,OAAO;AACZ,UAAIlC,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK2D,IAAL,CAAUoB,KAAV,CAAgB,eAAe3B,KAAKlB,MAApB,GAA6B,QAA7B,GAAwCoD,KAAxD,EACCjG,IADD,CACM;AAAA,iBAAY+B,SAASgE,IAAT,EAAZ;AAAA,SADN,EAEC/F,IAFD,CAEM,UAASiB,GAAT,EAAc;AAClBuE,kBAAQvE,GAAR;AACC,SAJH;AAKD,OANM,CAAP;AAOD;;+BAEDmF,6BAASN,SAAS;AAChB,UAAI/B,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK2D,IAAL,CAAUoB,KAAV,CAAgB,eAAe3B,KAAKlB,MAApB,GAA6B,UAA7B,GAA0CiD,OAA1D,EACC9F,IADD,CACM;AAAA,iBAAY+B,SAASgE,IAAT,EAAZ;AAAA,SADN,EAEC/F,IAFD,CAEM,UAASkE,KAAT,EAAgB;AACpBsB,kBAAQtB,KAAR;AACC,SAJH;AAKD,OANM,CAAP;AAOD;;+BAEDtD,2CAAiB;AACf,UAAImD,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK2D,IAAL,CAAUoB,KAAV,CAAgB,WAAW3B,KAAKlB,MAAhB,GAAyB,SAAzC,EACG7C,IADH,CACQ;AAAA,iBAAY+B,SAASgE,IAAT,EAAZ;AAAA,SADR,EAEG/F,IAFH,CAEQ,UAASkE,KAAT,EAAgB;AACpBsB,kBAAQtB,KAAR;AACD,SAJH;AAKD,OANM,CAAP;AAOD;;+BAEDpD,+CAAmB;AACjB,UAAIiD,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI1E,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK2D,IAAL,CAAUoB,KAAV,CAAgB,WAAW3B,KAAKlB,MAAhB,GAAyB,WAAzC,EACG7C,IADH,CACQ;AAAA,iBAAY+B,SAASgE,IAAT,EAAZ;AAAA,SADR,EAEG/F,IAFH,CAEQ,UAASkE,KAAT,EAAgB;AACpBsB,kBAAQtB,KAAR;AACD,SAJH;AAKD,OANM,CAAP;AAOD;;+BAKDmC,6CAAiBC,QAAQC,WAAW;AAClC,UAAI5F,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK2D,IAAL,CAAUoB,KAAV,CAAgB,MAAhB,EAAwB;AACtBC,kBAAQ,MADc;AAEtBC,gBAAM/G,KAAK6D,SAAL,CAAe,EAAC,SAAS4D,MAAV,EAAkB,YAAYC,SAA9B,EAAf;AAFgB,SAAxB,EAGGvG,IAHH,CAGQ;AAAA,iBAAY+B,SAASgE,IAAT,EAAZ;AAAA,SAHR,EAIE/F,IAJF,CAIO,UAAS6F,OAAT,EAAkB;AACvBlF,eAAKR,eAAL,CAAqBO,OAArB,CAA6B,oBAA7B,EAAmDmF,OAAnD;AACAL,kBAAQK,OAAR;AACD,SAPD,EAOG7D,KAPH,CAOS,iBAAS;AAChB,cAAGC,MAAMC,MAAN,KAAiB,GAApB,EAAyB;AACvBuD,mBAAO,8BAAP;AACD,WAFD,MAEO;AACLA,mBAAO,8DAAP;AACD;AACF,SAbD;AAcD,OAfM,CAAP;AAgBD;;+BAEDJ,+CAAmB;AACjB,UAAIhH,OAAOQ,KAAKC,KAAL,CAAWC,eAAeC,OAAf,CAAuB,YAAvB,CAAX,CAAX;AACA,UAAIwH,MAAM,EAACC,iBAAiB,KAAlB,EAAV;AACA,UAAGpI,QAAQ,IAAX,EAAiB;AACfmI,YAAI3D,MAAJ,GAAaxE,KAAKwE,MAAlB;AACA2D,YAAIC,eAAJ,GAAsB,IAAtB;AACD;AACD,aAAOD,GAAP;AACD;;+BAKDE,yCAAe3C,MAAM;AACnB,UAAI4C,cAAc;AAChBxI,cAAM,EADU;AAEhByI,kBAAU,EAFM;AAGhBC,eAAO;AAHS,OAAlB;AAKA,UAAG,KAAK7C,SAAL,CAAeD,IAAf,CAAoBlB,MAApB,KAA+BkB,KAAKlB,MAAvC,EAA+C;AAC7C8D,oBAAYxI,IAAZ,GAAoB,KAAK6F,SAAL,CAAeD,IAAf,CAAoB+C,OAApB,CAA4B3I,IAAhD;AACAwI,oBAAYC,QAAZ,GAAwB,KAAK5C,SAAL,CAAeD,IAAf,CAAoB+C,OAApB,CAA4BF,QAApD;AACAD,oBAAYE,KAAZ,GAAqB,KAAK7C,SAAL,CAAeD,IAAf,CAAoB+C,OAApB,CAA4BD,KAAjD;AACD;AACD,aAAOF,WAAP;AACD;;+BAMDI,6BAAST,QAAQC,WAAW;AAC1B,UAAI5F,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK2D,IAAL,CAAUoB,KAAV,CAAgB,MAAhB,EAAwB;AACtBC,kBAAQ,MADc;AAEtBC,gBAAM/G,KAAK6D,SAAL,CAAe,EAAC,SAAS4D,MAAV,EAAkB,YAAYC,SAA9B,EAAf;AAFgB,SAAxB,EAGGvG,IAHH,CAGQ;AAAA,iBAAY+B,SAASgE,IAAT,EAAZ;AAAA,SAHR,EAIG/F,IAJH,CAIQ,eAAO;AACbwF,kBAAQgB,GAAR;AACD,SAND,EAMGxE,KANH,CAMS,iBAAS;AAChByD,iBAAOxD,KAAP;AACD,SARD;AASD,OAVM,CAAP;AAWD;;+BAMD+E,+CAAkBjD,MAAM;AACtB,UAAIkD,OAAO;AACTlD,cAAM;AACJmD,qBAAWnD,KAAKwB,GADZ;AAEJ4B,iBAAOpD,KAAKoD;AAFR,SADG;AAKTnB,gBAAQ,EALC;AAMTxC,cAAM;AANG,OAAX;AAQA,UAAI7C,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK2D,IAAL,CAAUoB,KAAV,CAAgB,WAAhB,EAA6B;AAC3BC,kBAAQ,MADmB;AAE3BC,gBAAM/G,KAAK6D,SAAL,CAAeuE,IAAf;AAFqB,SAA7B,EAGGjH,IAHH,CAGQ,UAAS6F,OAAT,EAAkB;AACxBL,kBAAQK,OAAR;AACD,SALD;AAMD,OAPM,CAAP;AAQD;;;;oBA5VkBhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCERuD,gBAAAA,gBADZ;AAeC,mBAAYvJ,MAAZ,EAAoBJ,MAApB,EAA4B4J,gBAA5B,EAA6C;AAAA;;AAAA,WAb7CjH,OAa6C,GAbnC,OAamC;AAAA,WAZ7CkH,UAY6C,GAZhC,CACX,SADW,EAEX,SAFW,EAGX,SAHW,EAIX,SAJW,EAKX,SALW,EAMX,SANW,EAOX,OAPW,CAYgC;AAAA,WAH7CC,WAG6C,GAH/B,EAG+B;AAAA,WAF7CrD,KAE6C,GAFrC,EAEqC;;AAC3C,WAAK/C,SAAL,GAAiBtD,MAAjB;AACA,WAAKH,KAAL,GAAaD,MAAb;AACA,WAAK0C,eAAL,GAAuBkH,gBAAvB;AACA,UAAI1G,OAAO,IAAX;AACA,WAAKR,eAAL,CAAqBoE,SAArB,CAA+B,gBAA/B,EAAiD,mBAAW;AAC1D5D,aAAK6G,gBAAL,CAAsB5C,OAAtB;AACD,OAFD;AAGA,WAAKzE,eAAL,CAAqBoE,SAArB,CAA+B,mBAA/B,EAAoD,mBAAW;AAC7D5D,aAAK8G,qBAAL,CAA2B7C,OAA3B;AACD,OAFD;AAID;;oBAEDrE,6BAASC,OAAOC,aAAa;AAC3B,WAAKN,eAAL,CAAqBO,OAArB,CAA6B,cAA7B;AACA,UAAIC,OAAO,IAAX;AACA,UAAGH,MAAMmB,EAAN,IAAYC,SAAZ,IAAyBpB,MAAMmB,EAAN,KAAa,IAAzC,EAA+C;AAC7C,aAAKjE,KAAL,CAAW0I,QAAX,CAAoB5F,MAAMmB,EAA1B,EAA8B3B,IAA9B,CAAmC,UAAS0H,CAAT,EAAW;AAC5C/G,eAAKuD,KAAL,GAAawD,CAAb;AACD,SAFD;AAGD,OAJD,MAIO;AACL,aAAKxD,KAAL,GAAa;AACXyD,wBAAc,IAAIC,IAAJ,EADH;AAEXC,iBAAO,EAFI;AAGX5B,iBAAO,CAHI;AAIX6B,gBAAM,CAAC,EAACC,QAAO,CAAR,EAAWF,OAAM,EAAjB,EAAD;AAJK,SAAb;AAMD;AACF;;oBAEDG,2BAAS;AACP,WAAK9D,KAAL,CAAW4D,IAAX,CAAgBG,IAAhB,CAAqB,EAACF,QAAO,KAAK7D,KAAL,CAAW4D,IAAX,CAAgBI,MAAhB,GAAyB,CAAjC,EAAoCL,OAAM,KAAKN,WAA/C,EAArB;AACA,WAAKpH,eAAL,CAAqBO,OAArB,CAA6B,mBAA7B,EAAkD,IAAlD;AACD;;oBAEDyH,+BAAUC,KAAK;AACb,UAAIC,aAAa,qBAAEC,IAAF,CAAO,KAAKpE,KAAL,CAAW4D,IAAlB,EAAwB,UAASS,CAAT,EAAW;AAAC,eAAOA,EAAEhD,GAAF,IAAS6C,IAAI7C,GAApB;AAAwB,OAA5D,CAAjB;AACA,UAAG8C,cAAczG,SAAjB,EAA4B;AAC1B,aAAKsC,KAAL,CAAW4D,IAAX,GAAkB,qBAAEU,OAAF,CAAU,KAAKtE,KAAL,CAAW4D,IAArB,EAA2BO,UAA3B,CAAlB;AACD;AACD,UAAII,cAAc,CAAlB;AACA,WAAKvE,KAAL,CAAW4D,IAAX,CAAgBY,OAAhB,CAAwB,UAASN,GAAT,EAAa;AACnCA,YAAIL,MAAJ,GAAaU,aAAb;AACD,OAFD;AAGA,WAAKtI,eAAL,CAAqBO,OAArB,CAA6B,mBAA7B,EAAkD,IAAlD;AACD;;oBAEDiI,mCAAa;AACX,WAAKxI,eAAL,CAAqBO,OAArB,CAA6B,mBAA7B,EAAkD,IAAlD;AACD;;oBAED4B,uBAAO;AACL,WAAK4B,KAAL,CAAW0E,UAAX,GAAwB,KAAKC,mBAAL,CAAyB,KAAK3E,KAA9B,CAAxB;;AAEA,UAAG,KAAKA,KAAL,CAAWqB,GAAX,KAAmB3D,SAAtB,EACA;AACE,aAAKzB,eAAL,CAAqBO,OAArB,CAA6B,WAA7B,EAA0C,KAAKwD,KAA/C;AACD,OAHD,MAGO;AACL,aAAK/D,eAAL,CAAqBO,OAArB,CAA6B,cAA7B,EAA4C,KAAKwD,KAAjD;AACD;AACD,WAAK/C,SAAL,CAAewB,YAAf;AACD;;oBAED6E,6CAAiBsB,MAAM;AACrB,UAAG,KAAK5E,KAAL,CAAWyD,YAAX,IAA2BmB,IAA9B,EACE,KAAK5E,KAAL,CAAWyD,YAAX,GAA0BmB,IAA1B;AACH;;oBAEDrB,uDAAsBsB,QAAQX,KAAK;AACjC,WAAKlE,KAAL,CAAW2D,KAAX,GAAmB,KAAKgB,mBAAL,CAAyB,KAAK3E,KAA9B,CAAnB;AACD;;oBAED2E,mDAAoBG,QAAQ;AAC1B,UAAIC,SAAS,qBAAEhL,GAAF,CAAM+K,OAAOlB,IAAb,EAAmB,UAASM,GAAT,EAAc;AAC5C,eAAOc,OAAOd,IAAIP,KAAX,CAAP;AACD,OAFY,CAAb;AAGA,aAAOoB,OAAOE,MAAP,CACL,UAASC,KAAT,EAAgBC,GAAhB,EAAoB;AAAE,eAASA,GAAD,GAAOD,QAAQC,GAAf,GAAoB,CAA5B;AAAgC,OADjD,EAEH,CAFG,CAAP;AAGD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC/FUnJ,kBAAAA,kBADZ;AAKC,qBAAY8C,OAAZ,EAAqBC,KAArB,EAA4BjC,gBAA5B,EAA6C;AAAA;;AAAA,WAF7CZ,OAE6C,GAFnC,gBAEmC;;AAC3C,WAAKe,SAAL,GAAiB6B,OAAjB;AACA,WAAKsG,SAAL,GAAiBrG,KAAjB;AACA,WAAK9C,eAAL,GAAuBa,gBAAvB;AACD;;sBAEDuI,+BAAW;AACT,WAAKpI,SAAL,CAAekB,eAAf,CAA+B,OAA/B,EAAwC,EAAEV,IAAI,CAAC,CAAP,EAAxC;AACD;;sBAED6H,+BAAUtF,OAAO;AACf,WAAK/C,SAAL,CAAekB,eAAf,CAA+B,OAA/B,EAAwC,EAAEV,IAAIuC,MAAMqB,GAAZ,EAAxC;AACD;;sBAEDkE,mCAAYvF,OAAO;AACjB,UAAGb,QAAQ,6CAAR,CAAH,EAA2D;AACzD,aAAKlD,eAAL,CAAqBO,OAArB,CAA6B,cAA7B,EAA6CwD,MAAMqB,GAAnD;AACD;AACF;;sBAEDhF,+BAAW;AACT,WAAKJ,eAAL,CAAqBO,OAArB,CAA6B,cAA7B;AACD;;;;;MAIU+C,8BAAAA;;;;;kCACXC,yBAAOC,OAAM;AACX,aAAOA,SAASA,MAAMC,WAAN,EAAhB;AACD;;;;;;;;;;;UCvCavE,YAAAA;AAAT,WAASA,SAAT,CAAmBzB,MAAnB,EAA2B,CAEjC;;;;;;;;;;;;;;;;;;;;;;;;;;MCIY8L,gBAAAA,gBADZ;AAUC,mBAAY7L,MAAZ,EAAoB8L,GAApB,EAAyB3I,gBAAzB,EAA0C;AAAA;;AAAA,WAP1CiD,YAO0C,GAP3B,IAO2B;AAAA,WAL1CF,IAK0C,GALnC;AACHoD,eAAO,EADJ;AAEHyC,kBAAU;AAFP,OAKmC;;AACxC,WAAKzI,SAAL,GAAiBtD,MAAjB;AACA,WAAKH,KAAL,GAAaiM,GAAb;AACA,WAAKxJ,eAAL,GAAuBa,gBAAvB;AACD;;oBAED6I,iCAAY;AACV,UAAIlJ,OAAO,IAAX;AACAA,WAAKsD,YAAL,GAAoB,IAApB;AACA,WAAKvG,KAAL,CAAW2I,gBAAX,CAA4B,KAAKtC,IAAL,CAAUoD,KAAtC,EAA6C,KAAKpD,IAAL,CAAU6F,QAAvD,EACG5J,IADH,CACQ,gBAAQ;AACZ,YAAG+D,IAAH,EAAS;AACPpD,eAAKR,eAAL,CAAqBO,OAArB,CAA6B,eAA7B,EAA8C,IAA9C;AACAC,eAAKQ,SAAL,CAAekB,eAAf,CAA+B,MAA/B;AACD;AACF,OANH,EAMKL,KANL,CAMW,iBAAS;AAChBrB,aAAKsD,YAAL,GAAoBhC,KAApB;AACD,OARH;AASD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC3BU6H,kBAAAA,kBADZ;AAKC,qBAAYjM,MAAZ,EAAoBkM,gBAApB,EAAsC5J,eAAtC,EAAuD;AAAA;;AACrD,WAAKgB,SAAL,GAAiBtD,MAAjB;AACA,WAAKH,KAAL,GAAaqM,gBAAb;AACA,WAAKC,UAAL,GAAkB7J,eAAlB;AACD;;sBAEDI,+BAAW;AACT,WAAKyJ,UAAL,CAAgBtJ,OAAhB,CAAwB,cAAxB;AACD;;sBAEDuJ,qCAAc;AACZ,WAAKD,UAAL,CAAgBtJ,OAAhB,CAAwB,mBAAxB;AACD;;sBAEDwJ,iCAAY;AACV,UAAIvJ,OAAO,IAAX;AACA,UAAG,KAAKwJ,IAAR,EAAc;AACZ,YAAIC,SAAS,IAAIC,UAAJ,EAAb;AACAD,eAAOE,MAAP,GAAiB,UAASC,OAAT,EAAkB;AACjC,iBAAO,UAAShC,CAAT,EAAY;AACjB5H,iBAAKjD,KAAL,CAAWqG,IAAX,CAAgB8C,KAAhB,GAAwB0B,EAAEiC,MAAF,CAASC,MAAjC;AACD,WAFD;AAGD,SAJe,CAIb,KAAKN,IAAL,CAAU,CAAV,CAJa,CAAhB;AAKAC,eAAOM,aAAP,CAAqB,KAAKP,IAAL,CAAU,CAAV,CAArB;AACD;AAEF;;;;;MAGUQ,kCAAAA;;;;;sCACXjH,yBAAOkH,MAAM;AACX,UAAGA,IAAH,EACE,OAAOC,OAAOC,GAAP,CAAWC,eAAX,CAA2BH,KAAK,CAAL,CAA3B,CAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCtCUlB,gBAAAA,gBADZ;AAUC,mBAAY7L,MAAZ,EAAoB8L,GAApB,EAAwB;AAAA;;AAAA,WAPxB1F,YAOwB,GAPT,IAOS;AAAA,WANxBF,IAMwB,GANjB;AACHoD,eAAO,EADJ;AAEHyC,kBAAU,EAFP;AAGHoB,sBAAc;AAHX,OAMiB;;AACtB,WAAK7J,SAAL,GAAiBtD,MAAjB;AACA,WAAKyL,SAAL,GAAiBK,GAAjB;AACD;;oBAED5C,+BAAW;AACT,UAAG,KAAKhD,IAAL,CAAU6F,QAAV,IAAsB,KAAK7F,IAAL,CAAUiH,YAAnC,EAAiD;AAC7C,YAAIrK,OAAO,IAAX;AACAA,aAAKsD,YAAL,GAAoB,IAApB;AACA,aAAKqF,SAAL,CAAevC,QAAf,CAAwB,KAAKhD,IAAL,CAAUoD,KAAlC,EAAyC,KAAKpD,IAAL,CAAU6F,QAAnD,EACG5J,IADH,CACQ,eAAO;AACX,cAAGwG,GAAH,EAAQ;AACN7F,iBAAK2I,SAAL,CAAetC,iBAAf,CAAiCR,GAAjC,EAAsCxG,IAAtC,CAA2C,UAASiL,GAAT,EAAa;AACtDtK,mBAAKQ,SAAL,CAAekB,eAAf,CAA+B,OAA/B;AACD,aAFD,EAEG,UAAS6I,GAAT,EAAc;AACfvK,mBAAKsD,YAAL,GAAoB,YAAYiH,GAAhC;AACD,aAJD;AAKD;AACJ,SATD,EASGlJ,KATH,CASS,iBAAS;AAChBrB,eAAKsD,YAAL,GAAoB,YAAYhC,KAAhC;AACD,SAXD;AAYH,OAfD,MAeO;AACL,aAAKkJ,OAAL,GAAe,+BAAf;AACD;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCjCUC,iBAAAA,iBADZ;AAKC,oBAAY1N,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,WAAKA,KAAL,GAAaA,KAAb;AACD;;qBASD2N,2BAAS;AACPtM,qBAAeuM,KAAf;AACA,WAAK5N,KAAL,CAAWqG,IAAX,GAAkB,IAAlB;AACA,WAAKrG,KAAL,CAAW8D,SAAX,GAAuB,IAAvB;AACA,WAAK3D,MAAL,CAAYwE,eAAZ,CAA4B,OAA5B;AACD;;;;0BAVqB;AACpB,YAAIhE,OAAOQ,KAAKC,KAAL,CAAWC,eAAeC,OAAf,CAAuB,YAAvB,CAAX,CAAX;AACA,eAAQX,SAAS,IAAjB;AACD;;;;;;;aAXkB;;;;;;;;;;;;;;;;;;;;;;;;;;MCHRkN,mCAAAA;;;;;uCACX7H,yBAAOC,OAAO6H,QAAQ;AACpB,aAAO,sBAAO7H,KAAP,EAAc6H,MAAd,CAAqBA,MAArB,CAAP;AACD;;uCACDC,6BAASC,KAAKF,QAAO;AACnB,aAAO,sBAAOE,GAAP,EAAYF,MAAZ,CAAP;AACD;;;;;ACVH;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA","file":"app-bundle.js","sourcesContent":["import {computedFrom, inject} from 'aurelia-framework';\nimport {Redirect} from 'aurelia-router';\nimport Store from 'common/shooting-log-store';\n\n@inject(Store)\nexport class App {\n\n  constructor(_store) {\n    this.store = _store;\n  }\n\n  configureRouter(config, router) {\n    config.title = 'My Shooting Log';\n    config.addPipelineStep('authorize', AuthorizeStep);\n    config.map([\n      { route: ['', 'welcome'], name: 'home',      moduleId: 'welcome',         auth: true,  nav: true,  title: 'Home' },\n      { route: ['scorecard'],   name: 'scorecard', moduleId: 'round/scorecard', auth: true,  nav: true,  title: 'Scorecard' },\n      { route: ['round'],       name: 'round',     moduleId: 'round/round',     auth: true,  nav: false, title: 'Round' },\n      { route: ['bow_list'],    name: 'bow_list',  moduleId: 'bow/bow_list',    auth: true,  nav: true,  title: 'Bows' },\n      { route: ['bow'],         name: 'bow',       moduleId: 'bow/bow',         auth: true,  nav: false, title: 'Bow Details' },\n      { route: ['profile'],     name: 'profile',   moduleId: 'user/profile',    auth: true,  nav: true,  title: 'Profile' },\n      { route: ['login'],       name: 'login',     moduleId: 'user/login',      auth: false, nav: false, title: 'Login' },\n      { route: ['register'],    name: 'register',  moduleId: 'user/register',   auth: false, nav: false, title: 'Register' },\n    ]);\n\n    this.router = router;\n  }\n}\n\nclass AuthorizeStep {\n\n  run(navigationInstruction, next) {\n    // Check if the route has an \"auth\" key\n    // The reason for using `nextInstructions` is because\n    // this includes child routes.\n    if (navigationInstruction.getAllInstructions().some(i => i.config.auth)) {\n      var auth = JSON.parse(sessionStorage.getItem('auth-token'));\n      if(auth == null) {\n        return next.cancel(new Redirect('login'));\n      }\n    }\n\n    return next();\n  }\n}\n","export default {\n  debug: true,\n  testing: true,\n  API_URL: \"http://www.myshootinglog.com:8080\"\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport Store from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(Router, Store, EventAggregator)\nexport class Welcome {\n  heading = 'Welcome to MyShootingLog!';\n  last30Stats = {};\n  lifetimeStats = {};\n\n  constructor(router, store, eventAggregator) {\n    this.router = router;\n    this.store = store;\n    this.eventAggregator = eventAggregator;\n  }\n\n  activate(parms, routeConfig) {\n    this.eventAggregator.publish('viewActivate');\n    var self = this;\n    this.store.getLast30Stats().then(function(stats){\n      self.last30Stats = stats[0];\n    });\n    this.store.getLifetimeStats().then(function(stats){\n      self.lifetimeStats = stats[0];\n    });\n  }\n\n  get latestRound() {\n\n  }\n\n  get mostUsedBow() {\n\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport Store from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport environment from '../environment';\nimport {HttpClient} from 'aurelia-http-client';\n\n@inject(Router, Store, EventAggregator)\nexport class Bow {\n  \n  heading = 'Bow Details';\n  bow = {};\n  bowTypes = [\n    'Compound',\n    'Crossbow',\n    'Longbow',\n    'Recurve',\n    'Self',\n    'Stick'\n  ];\n  constructor(router, _store, _eventAggregator){\n    this.appRouter = router;\n    this.store = _store;\n    this.eventAggregator = _eventAggregator;\n    this.client = new HttpClient().configure(x => {\n      x.withBaseUrl(environment.API_URL);\n      x.withHeader('x-authorization',this.store.authToken.token);\n    });\n  }\n\n  activate(parms, routeConfig) {\n    this.eventAggregator.publish('viewActivate');\n    this.getBowTypes();\n    var self = this;\n    if(parms.id != undefined && parms.id !== \"-1\") {\n      this.client.get(\"/bow/\" + parms.id)\n        .then(data => {\n          this.bow = JSON.parse(data.response);\n        })\n        .catch(error => {\n          if(error.status === 403) {\n            alert('Session timeout, please log in again');\n            this.store.clearStore();\n            this.router.navigateToRoute('login');\n          } else {\n            this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n          }\n\n        });\n    }\n  }\n\n  save() {\n    if(this.bow.id === undefined)\n    {\n      this.addBow();\n    } else {\n      this.updateBow();\n    }\n\n  }\n\n  updateBow() {\n    var self = this;\n    this.client.put(\"/bow/\" + this.bow.id, JSON.stringify(this.bow))\n      .then(data => {\n        self.bow = JSON.parse(data.response);\n        this.appRouter.navigateBack();\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n        }\n\n      });\n  }\n\n  addBow() {\n    var self = this;\n    this.bow.member_id = this.store.authToken.userId;\n    this.client.post(\"/bow\", JSON.stringify(this.bow))\n      .then(data => {\n        self.bow = JSON.parse(data.response);\n        this.appRouter.navigateBack();\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n        }\n\n      });\n  }\n\n  getBowTypes() {\n    var self = this;\n    this.client.get(\"/bowtype\", JSON.stringify(this.bow))\n      .then(data => {\n        self.bowTypes = JSON.parse(data.response);\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving list of bow types, please contact support or try again\";\n        }\n\n      });\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport DataLayer from 'common/shooting-log-store';\nimport {HttpClient} from 'aurelia-http-client';\nimport environment from '../environment';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(Router, DataLayer, EventAggregator)\nexport class BowList{\n\n  constructor(_router, _data, _eventAggregator){\n    this.appRouter = _router;\n    this.store = _data;\n    this.eventAggregator = _eventAggregator;\n    this.client = new HttpClient().configure(x => {\n      x.withBaseUrl(environment.API_URL);\n      x.withHeader('x-authorization',this.store.authToken.token);\n    });\n\n  }\n\n  heading = 'Your bows';\n\n  newBow() {\n    this.appRouter.navigateToRoute('bow', { id: -1 });\n  }\n\n  editBow(bow) {\n    this.appRouter.navigateToRoute('bow', { id: bow.id });\n  }\n\n  deleteBow(bow) {\n    var self = this;\n    if(confirm(\"Are you sure you want to delete this bow?\")) {\n      this.client.delete(\"/bow/\" + bow.id)\n        .then(data => {\n          self.refreshBows();\n        })\n        .catch(error => {\n          if(error.status === 403) {\n            alert('Session timeout, please log in again');\n            this.store.clearStore();\n            this.router.navigateToRoute('login');\n          } else {\n            this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n          }\n\n        });\n    }\n  }\n\n  activate() {\n    this.eventAggregator.publish('viewActivate');\n    this.refreshBows();\n  }\n\n  refreshBows() {\n    var self = this;\n    this.client.get(\"/user/\" + this.store.authToken.userId + \"/bows\")\n      .then(data => {\n        self.bows = JSON.parse(data.response);\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n        }\n\n      });\n  }\n}\n\nexport class UpperValueConverter {\n  toView(value){\n    return value && value.toUpperCase();\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-fetch-client';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator, HttpClient)\nexport default class ShootingLogStore {\n\n  user = null;\n  scorecard = null;\n  errorMessage = null;\n  round = null;\n  bow = null;\n  authToken = null;\n\n  constructor(_eventAggregator, _http){\n    this.eventAggregator = _eventAggregator;\n    _http.configure(config => {\n      config\n        .useStandardConfiguration()\n        .withDefaults({headers: {\n          'Accept': 'application/json',\n          'X-Authorization': JSON.stringify(this.authToken)\n        }})\n        .withBaseUrl('http://www.myshootinglog.com:8080/');\n    });\n    this.http = _http;\n    this.subscribe();\n  }\n\n  subscribe(){\n    let self = this;\n    this.eventAggregator.subscribe('scorecard.changed', payload => {\n      self.handleScorecardChanged();\n    });\n    this.eventAggregator.subscribe('logout', payload => {\n      self.handleLogout();\n    });\n    this.eventAggregator.subscribe('viewActivate', payload => {\n      self.handleViewActivate();\n    });\n    //Bow handlers\n    this.eventAggregator.subscribe('bow.add', payload => {\n      self.handleBowAdd(payload);\n    });\n    this.eventAggregator.subscribe('bow.update', payload => {\n      self.handleBowUpdate(payload);\n    });\n    this.eventAggregator.subscribe('bow.delete', payload => {\n      self.handleBowDelete(payload);\n    });\n    //Scorecard\n    this.eventAggregator.subscribe('round.add', payload => {\n      self.handleRoundAdd(payload);\n    });\n    this.eventAggregator.subscribe('round.delete', payload => {\n      self.handleRoundDelete(payload);\n    });\n    this.eventAggregator.subscribe('round.update', payload => {\n      self.handleRoundUpdate(payload);\n    });\n    this.eventAggregator.subscribe('bowStore.stale', payload => {\n      self.handleBowStoreStale(payload);\n    });\n    this.eventAggregator.subscribe('roundStore.stale', payload => {\n      self.handleRoundStoreStale(payload);\n    });\n    this.eventAggregator.subscribe('user.authenticated', payload => {\n      self.handleUserAuthenticated(payload);\n    });\n  }\n\n  /*************************\n   * GLOBAL EVENT HANDLERS *\n   *************************/\n  handleViewActivate() {\n    //Push scorecard into store\n    this.user = this.getUserInSession();\n    this.authToken = JSON.parse(sessionStorage.getItem('auth-token'));\n  }\n\n  handleUserAuthenticated(token) {\n    this.authToken = token;\n    sessionStorage.setItem('auth-token', JSON.stringify(token));\n  }\n\n  handleLogout() {\n    this.user = null;\n    this.authToken = null;\n  }\n  \n  handleScorecardChanged() {\n    var user = this.getUserInSession();\n    var self = this;\n    //Hack to make mongoose behave.  Need to clean this up at the API side\n    this.scorecard._id = undefined;\n    this.scorecard.id = undefined;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('scorecard/' + user.userId, {\n        method: 'put',\n        body: JSON.stringify(self.scorecard)\n      }).then(function(results) {\n        resolve(results);\n      })\n    });\n  }\n  \n  /************************\n   * ROUND EVENT HANDLERS *\n   ************************/\n  handleRoundDelete(roundId) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/rounds/' + roundId, {method: 'delete'})\n      .then(function(results) {\n        self.eventAggregator.publish('roundStore.stale');\n      });\n  }\n  \n  handleRoundAdd(round) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/rounds', {\n      method: 'post',\n      body: JSON.stringify(round)\n    }).then(function(results) {\n        self.eventAggregator.publish('roundStore.stale');\n      });\n  }\n  \n  handleRoundUpdate(round) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/rounds/' + round._id, {\n      method: 'put',\n      body: JSON.stringify(round)\n    }).then(function(results) {\n        self.eventAggregator.publish('roundStore.stale');\n      });\n  }\n  \n  handleRoundStoreStale() {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/rounds')\n      .then(response => response.json())\n      .then(function(rounds) {\n        self.scorecard.rounds = rounds;\n        });\n  }\n  \n  /**********************\n   * BOW EVENT HANDLERS *\n   **********************/\n  handleBowAdd(bow) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/bows', {\n      method: 'post',\n      body: JSON.stringify(bow)\n    }).then(function(results) {\n        self.eventAggregator.publish('bowStore.stale');\n      });\n  }\n\n  handleBowUpdate(bow) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/bows/' + bow._id, {\n      method: 'put',\n      body: JSON.stringify(bow)\n    }).then(function(results) {\n        self.eventAggregator.publish('bowStore.stale');\n      });\n  }\n\n  handleBowDelete(bowId) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/bows/' + bowId, {method: 'delete'})\n      .then(function(results) {\n        self.eventAggregator.publish('bowStore.stale');\n      });\n  }\n  \n  handleBowStoreStale() {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/bows')\n      .then(response => response.json())\n      .then(function(bows) {\n        self.scorecard.bows = bows;\n      });\n  }\n  \n  /***********\n   * METHODS *\n   ***********/\n  getScorecard(userId) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      if(self.scorecard == null || self.scorecard == undefined) {\n        \n        self.http.fetch('scorecard/'+ userId)\n        .then(response => response.json())\n        .then(function(results) {\n          resolve(results);\n        })\n        \n      } else {\n        resolve(self.scorecard);\n      }\n    });\n  }\n\n  getBow(bowId) {\n    var user = this.getUserInSession();\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('scorecard/' + user.userId + '/bows/' + bowId)\n      .then(response => response.json())\n      .then(function(bow) {\n        resolve(bow);\n        });\n    });\n  }\n  \n  getRound(roundId) {\n    var user = this.getUserInSession();\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('scorecard/' + user.userId + '/rounds/' + roundId)\n      .then(response => response.json())\n      .then(function(round) {\n        resolve(round);\n        });\n    });\n  }\n\n  getLast30Stats() {\n    var user = this.getUserInSession();\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('stats/' + user.userId + '/last30')\n        .then(response => response.json())\n        .then(function(round) {\n          resolve(round);\n        });\n    });\n  }\n\n  getLifetimeStats() {\n    var user = this.getUserInSession();\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('stats/' + user.userId + '/lifetime')\n        .then(response => response.json())\n        .then(function(round) {\n          resolve(round);\n        });\n    });\n  }\n\n  /*********************\n   *       USER\n   *********************/\n  authenticateUser(_email, _password) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('auth', {\n        method: 'post',\n        body: JSON.stringify({'email': _email, 'password': _password })\n      }).then(response => response.json())\n       .then(function(results) {\n        self.eventAggregator.publish('user.authenticated', results);\n        resolve(results);\n      }).catch(error => {\n        if(error.status === 401) {\n          reject(\"Invalid username or password\");\n        } else {\n          reject(\"Unknown error occurred during login.  Please try again later\");\n        }\n      });\n    });\n  }\n  \n  getUserInSession() {\n    var auth = JSON.parse(sessionStorage.getItem('auth-token'));\n    var usr = {isAuthenticated: false};\n    if(auth != null) {\n      usr.userId = auth.userId;\n      usr.isAuthenticated = true;\n    }\n    return usr;\n  }\n\n  /**\n   * TODO: Kill this stupid method!\n   */\n  getUserDetails(user) {\n    let userDetails = {\n      name: '',\n      location: '',\n      image: ''\n    };\n    if(this.scorecard.user.userId === user.userId) {\n      userDetails.name =  this.scorecard.user.details.name;\n      userDetails.location =  this.scorecard.user.details.location;\n      userDetails.image =  this.scorecard.user.details.image;\n    }\n    return userDetails;\n  }\n\n  /**\n   * Created the Firebase account and returns the accountID which will be the key\n   * the API uses for accessing the users data\n   */\n  register(_email, _password) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('user', {\n        method: 'post',\n        body: JSON.stringify({'email': _email, 'password': _password })\n      }).then(response => response.json())\n        .then(usr => {\n        resolve(usr);\n      }).catch(error => {\n        reject(error);\n      });\n    });\n  }\n  \n  /**\n   * After registration, the users scorecard must be initialized by POSTing a \n   * stub record to the API.  \n   */\n  initUserScorecard(user) {\n    var card = {\n      user: {\n        accountId: user._id,\n        email: user.email\n      },\n      rounds: [],\n      bows: []\n    }\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('scorecard', {\n        method: 'post',\n        body: JSON.stringify(card)\n      }).then(function(results) {\n        resolve(results);\n      })\n    });\n  }\n  \n\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport Store from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport _ from 'underscore';\n\n@inject(Router, Store, EventAggregator)\nexport class Round {\n  heading = 'Round';\n  roundTypes = [\n    'FITA 18',\n    'FITA 25',\n    'FITA 30',\n    'FITA 50',\n    'FITA 70',\n    'FITA 90',\n    'Other'\n  ];\n  newEndScore = 30;\n  round = {};\n  \n  constructor(router, _store, _EventAggregator){\n    this.appRouter = router;\n    this.store = _store;\n    this.eventAggregator = _EventAggregator;\n    var self = this;\n    this.eventAggregator.subscribe('roundDate.send', payload => {\n      self.handleDateChange(payload);\n    });\n    this.eventAggregator.subscribe('round.ends.change', payload => {\n      self.handleRoundEndsChange(payload);\n    });\n    \n  }\n\n  activate(parms, routeConfig) {\n    this.eventAggregator.publish('viewActivate');\n    var self = this;\n    if(parms.id != undefined && parms.id !== \"-1\") {\n      this.store.getRound(parms.id).then(function(r){\n        self.round = r;\n      });\n    } else {\n      this.round = {\n        recordedDate: new Date(),\n        score: 30,\n        bowId: 1,\n        ends: [{number:1, score:30}]\n      }\n    }\n  }\n\n  addEnd() {\n    this.round.ends.push({number:this.round.ends.length + 1, score:this.newEndScore});\n    this.eventAggregator.publish('round.ends.change', true);\n  }\n  \n  deleteEnd(end) {\n    var deletedEnd = _.find(this.round.ends, function(e){return e._id == end._id});\n    if(deletedEnd != undefined) {\n      this.round.ends = _.without(this.round.ends, deletedEnd);\n    }\n    var roundNumber = 1;\n    this.round.ends.forEach(function(end){\n      end.number = roundNumber++;\n    })\n    this.eventAggregator.publish('round.ends.change', true);\n  }\n  \n  endChanged() {\n    this.eventAggregator.publish('round.ends.change', true);\n  }\n  \n  save() {\n    this.round.roundScore = this.calculateRoundScore(this.round);\n    \n    if(this.round._id === undefined)\n    {\n      this.eventAggregator.publish('round.add', this.round);\n    } else {\n      this.eventAggregator.publish('round.update',this.round);\n    }\n    this.appRouter.navigateBack();\n  }\n\n  handleDateChange(date) {\n    if(this.round.recordedDate != date)\n      this.round.recordedDate = date;\n  }\n  \n  handleRoundEndsChange(action, end) {\n    this.round.score = this.calculateRoundScore(this.round);\n  }\n  \n  calculateRoundScore(_round) {\n    var scores = _.map(_round.ends, function(end) {\n      return Number(end.score);\n    });\n    return scores.reduce(\n      function(total, num){ return ((num)?(total + num):0) }\n      , 0);\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport DataLayer from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(Router, DataLayer, EventAggregator)\nexport class Welcome{\n\n  heading = 'Your scorecard';\n  \n  constructor(_router, _data, _eventAggregator){\n    this.appRouter = _router;\n    this.dataLayer = _data;\n    this.eventAggregator = _eventAggregator;\n  }\n\n  newRound() {\n    this.appRouter.navigateToRoute('round', { id: -1 });\n  }\n\n  editRound(round) {\n    this.appRouter.navigateToRoute('round', { id: round._id });\n  }\n\n  deleteRound(round) {\n    if(confirm(\"Are you sure you want to delete this round?\")) {\n      this.eventAggregator.publish('round.delete', round._id);\n    }\n  }\n  \n  activate() {\n    this.eventAggregator.publish('viewActivate');\n  }\n  \n}\n\nexport class UpperValueConverter {\n  toView(value){\n    return value && value.toUpperCase();\n  }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport DataLayer from 'common/shooting-log-store';\n\n@inject(Router, DataLayer, EventAggregator)\nexport class Login {\n  \n  errorMessage = null;\n  \n  user = {\n      email: '',\n      password: ''\n  }\n  \n  constructor(router, _dl, _eventAggregator){\n    this.appRouter = router;\n    this.store = _dl;\n    this.eventAggregator = _eventAggregator;\n  }\n  \n  loginUser() {\n    var self = this;\n    self.errorMessage = null;\n    this.store.authenticateUser(this.user.email, this.user.password)\n      .then(user => {\n        if(user) {\n          self.eventAggregator.publish('login.success', true);\n          self.appRouter.navigateToRoute('home');\n        }\n      }).catch(error => {\n        self.errorMessage = error;\n      });\n  }\n}\n","import {computedFrom, inject, URL} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport ShootingLogStore from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(Router, ShootingLogStore, EventAggregator)\nexport class Profile {\n\n  file;\n\n  constructor(router, shootingLogStore, eventAggregator) {\n    this.appRouter = router;\n    this.store = shootingLogStore;\n    this.dispatcher = eventAggregator;\n  }\n\n  activate() {\n    this.dispatcher.publish('viewActivate');\n  }\n\n  saveProfile() {\n    this.dispatcher.publish('scorecard.changed');\n  }\n\n  embedFile() {\n    var self = this;\n    if(this.file) {\n      var reader = new FileReader();\n      reader.onload = (function(theFile) {\n        return function(e) {\n          self.store.user.image = e.target.result;\n        };\n      })(this.file[0]);\n      reader.readAsDataURL(this.file[0]);\n    }\n\n  }\n}\n\nexport class BlobToUrlValueConverter {\n  toView(blob) {\n    if(blob)\n      return window.URL.createObjectURL(blob[0]);\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport DataLayer from 'common/shooting-log-store';\n\n@inject(Router, DataLayer)\nexport class Login {\n  \n  errorMessage = null;\n  user = {\n      email: '',\n      password: '',\n      confpassword: ''\n  }\n  \n  constructor(router, _dl){\n    this.appRouter = router;\n    this.dataLayer = _dl;\n  }\n  \n  register() {\n    if(this.user.password == this.user.confpassword) {\n        var self = this;\n        self.errorMessage = null;\n        this.dataLayer.register(this.user.email, this.user.password)\n          .then(usr => {\n            if(usr) {\n              self.dataLayer.initUserScorecard(usr).then(function(res){\n                self.appRouter.navigateToRoute('login')\n              }, function(err) {\n                self.errorMessage = \"ERROR: \" + err;\n              });\n            }  \n        }).catch(error => {\n          self.errorMessage = 'ERROR: ' + error;\n        });    \n    } else {\n      this.message = 'ERROR: Passwords do not match';\n    }\n  }\n}\n","import {bindable} from 'aurelia-framework';\nimport {inject} from 'aurelia-framework';\nimport Store from 'common/shooting-log-store';\n\n@inject(Store)\nexport class NavBar {\n  // User isn't authenticated by default\n  @bindable router = null;\n\n  constructor(store) {\n    this.store = store;\n  }\n\n  // We can check if the user is authenticated\n  // to conditionally hide or show nav bar items\n  get isAuthenticated() {\n    var auth = JSON.parse(sessionStorage.getItem('auth-token'));\n    return (auth !== null);\n  }\n\n  logout() {\n    sessionStorage.clear();\n    this.store.user = null;\n    this.store.authToken = null;\n    this.router.navigateToRoute('login');\n  }\n}\n","import moment from 'moment';\n/**\n * Created by tim on 9/30/2016.\n */\nexport class DateFormatValueConverter {\n  toView(value, format) {\n    return moment(value).format(format);\n  }\n  fromView(str, format){\n    return moment(str, format);\n  }\n}\n",null,null,null,null,null,null,null,null,null,null],"sourceRoot":"..\\src"}