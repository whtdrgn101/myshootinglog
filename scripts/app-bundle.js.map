{"version":3,"sources":["app.js","environment.js","main.js","welcome.js","bow/bow.js","bow/bow_list.js","common/shooting-log-store.js","resources/index.js","round/round.js","round/scorecard.js","user/login.js","user/profile.js","user/register.js","resources/elements/nav-bar.js","resources/value-converters/dateFormatValueConverter.js","C:/Users/tim/Documents/dev/myshootinglog/src/app.html","C:/Users/tim/Documents/dev/myshootinglog/src/welcome.html","C:/Users/tim/Documents/dev/myshootinglog/src/bow/bow.html","C:/Users/tim/Documents/dev/myshootinglog/src/bow/bow_list.html","C:/Users/tim/Documents/dev/myshootinglog/src/round/round.html","C:/Users/tim/Documents/dev/myshootinglog/src/round/scorecard.html","C:/Users/tim/Documents/dev/myshootinglog/src/user/login.html","C:/Users/tim/Documents/dev/myshootinglog/src/user/profile.html","C:/Users/tim/Documents/dev/myshootinglog/src/user/register.html","C:/Users/tim/Documents/dev/myshootinglog/src/resources/elements/nav-bar.html"],"names":["App","_store","store","configureRouter","config","router","title","addPipelineStep","AuthorizeStep","map","route","name","moduleId","auth","nav","run","navigationInstruction","next","getAllInstructions","some","i","JSON","parse","sessionStorage","getItem","cancel","debug","testing","API_URL","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","Welcome","eventAggregator","heading","last30Stats","lifetimeStats","activate","parms","routeConfig","publish","self","getLast30Stats","stats","getLifetimeStats","Bow","_eventAggregator","bow","bowTypes","appRouter","client","x","withBaseUrl","withHeader","authToken","token","getBowTypes","id","undefined","getBow","b","save","addBow","member_id","userId","post","stringify","bows","data","response","navigateBack","catch","error","status","alert","clearStore","navigateToRoute","get","BowList","_router","_data","newBow","editBow","_id","deleteBow","bowId","confirm","refreshBows","UpperValueConverter","toView","value","toUpperCase","ShootingLogStore","_http","user","scorecard","errorMessage","round","useStandardConfiguration","withDefaults","headers","http","subscribe","handleScorecardChanged","handleLogout","handleViewActivate","handleBowAdd","payload","handleBowUpdate","handleBowDelete","handleRoundAdd","handleRoundDelete","handleRoundUpdate","handleBowStoreStale","handleRoundStoreStale","handleUserAuthenticated","getUserInSession","setItem","resolve","reject","fetch","method","body","results","roundId","json","rounds","getScorecard","getRound","authenticateUser","_email","_password","usr","isAuthenticated","getUserDetails","userDetails","location","image","details","register","initUserScorecard","card","accountId","email","Round","_EventAggregator","roundTypes","newEndScore","handleDateChange","handleRoundEndsChange","r","recordedDate","Date","score","ends","number","addEnd","push","length","deleteEnd","end","deletedEnd","find","e","without","roundNumber","forEach","endChanged","roundScore","calculateRoundScore","date","action","_round","scores","Number","reduce","total","num","dataLayer","newRound","editRound","deleteRound","Login","_dl","password","loginUser","Profile","shootingLogStore","dispatcher","saveProfile","embedFile","file","reader","FileReader","onload","theFile","target","result","readAsDataURL","BlobToUrlValueConverter","blob","window","URL","createObjectURL","confpassword","res","err","message","NavBar","logout","clear","DateFormatValueConverter","format","fromView","str"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;MAKaA,cAAAA,cADZ;AAGC,iBAAYC,MAAZ,EAAoB;AAAA;;AAClB,WAAKC,KAAL,GAAaD,MAAb;AACD;;kBAEDE,2CAAgBC,QAAQC,QAAQ;AAC9BD,aAAOE,KAAP,GAAe,iBAAf;AACAF,aAAOG,eAAP,CAAuB,WAAvB,EAAoCC,aAApC;AACAJ,aAAOK,GAAP,CAAW,CACT,EAAEC,OAAO,CAAC,EAAD,EAAK,SAAL,CAAT,EAA0BC,MAAM,MAAhC,EAA6CC,UAAU,SAAvD,EAA0EC,MAAM,IAAhF,EAAuFC,KAAK,IAA5F,EAAmGR,OAAO,MAA1G,EADS,EAET,EAAEI,OAAO,CAAC,WAAD,CAAT,EAA0BC,MAAM,WAAhC,EAA6CC,UAAU,iBAAvD,EAA0EC,MAAM,IAAhF,EAAuFC,KAAK,IAA5F,EAAmGR,OAAO,WAA1G,EAFS,EAGT,EAAEI,OAAO,CAAC,OAAD,CAAT,EAA0BC,MAAM,OAAhC,EAA6CC,UAAU,aAAvD,EAA0EC,MAAM,IAAhF,EAAuFC,KAAK,KAA5F,EAAmGR,OAAO,OAA1G,EAHS,EAIT,EAAEI,OAAO,CAAC,UAAD,CAAT,EAA0BC,MAAM,UAAhC,EAA6CC,UAAU,cAAvD,EAA0EC,MAAM,IAAhF,EAAuFC,KAAK,IAA5F,EAAmGR,OAAO,MAA1G,EAJS,EAKT,EAAEI,OAAO,CAAC,KAAD,CAAT,EAA0BC,MAAM,KAAhC,EAA6CC,UAAU,SAAvD,EAA0EC,MAAM,IAAhF,EAAuFC,KAAK,KAA5F,EAAmGR,OAAO,aAA1G,EALS,EAMT,EAAEI,OAAO,CAAC,SAAD,CAAT,EAA0BC,MAAM,SAAhC,EAA6CC,UAAU,cAAvD,EAA0EC,MAAM,IAAhF,EAAuFC,KAAK,IAA5F,EAAmGR,OAAO,SAA1G,EANS,EAOT,EAAEI,OAAO,CAAC,OAAD,CAAT,EAA0BC,MAAM,OAAhC,EAA6CC,UAAU,YAAvD,EAA0EC,MAAM,KAAhF,EAAuFC,KAAK,KAA5F,EAAmGR,OAAO,OAA1G,EAPS,EAQT,EAAEI,OAAO,CAAC,UAAD,CAAT,EAA0BC,MAAM,UAAhC,EAA6CC,UAAU,eAAvD,EAA0EC,MAAM,KAAhF,EAAuFC,KAAK,KAA5F,EAAmGR,OAAO,UAA1G,EARS,CAAX;;AAWA,WAAKD,MAAL,GAAcA,MAAd;AACD;;;;;MAGGG;;;;;4BAEJO,mBAAIC,uBAAuBC,MAAM;AAI/B,UAAID,sBAAsBE,kBAAtB,GAA2CC,IAA3C,CAAgD;AAAA,eAAKC,EAAEhB,MAAF,CAASS,IAAd;AAAA,OAAhD,CAAJ,EAAyE;AACvE,YAAIA,OAAOQ,KAAKC,KAAL,CAAWC,eAAeC,OAAf,CAAuB,YAAvB,CAAX,CAAX;AACA,YAAGX,QAAQ,IAAX,EAAiB;AACf,iBAAOI,KAAKQ,MAAL,CAAY,4BAAa,OAAb,CAAZ,CAAP;AACD;AACF;;AAED,aAAOR,MAAP;AACD;;;;;;;;;;;oBC3CY;AACbS,WAAO,IADM;AAEbC,aAAS,IAFI;AAGbC,aAAS;AAHI;;;;;;;;UCUCC,YAAAA;;;;;;;;;;AANhBC,UAAQ1B,MAAR,CAAe;AACb2B,cAAU;AACRC,wBAAkB;AADV;AADG,GAAf;;AAMO,WAASH,SAAT,CAAmBI,OAAnB,EAA4B;AACjCA,YAAQC,GAAR,CACGC,qBADH,GAEGC,OAFH,CAEW,WAFX;;AAIA,QAAI,sBAAYV,KAAhB,EAAuB;AACrBO,cAAQC,GAAR,CAAYG,kBAAZ;AACD;;AAED,QAAI,sBAAYV,OAAhB,EAAyB;AACvBM,cAAQC,GAAR,CAAYI,MAAZ,CAAmB,iBAAnB;AACD;;AAEDL,YAAQM,KAAR,GAAgBC,IAAhB,CAAqB;AAAA,aAAMP,QAAQQ,OAAR,EAAN;AAAA,KAArB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MClBYC,kBAAAA,kBADZ;AAMC,qBAAYrC,MAAZ,EAAoBH,KAApB,EAA2ByC,eAA3B,EAA4C;AAAA;;AAAA,WAJ5CC,OAI4C,GAJlC,2BAIkC;AAAA,WAH5CC,WAG4C,GAH9B,EAG8B;AAAA,WAF5CC,aAE4C,GAF5B,EAE4B;;AAC1C,WAAKzC,MAAL,GAAcA,MAAd;AACA,WAAKH,KAAL,GAAaA,KAAb;AACA,WAAKyC,eAAL,GAAuBA,eAAvB;AACD;;sBAEDI,6BAASC,OAAOC,aAAa;AAC3B,WAAKN,eAAL,CAAqBO,OAArB,CAA6B,cAA7B;AACA,UAAIC,OAAO,IAAX;AACA,WAAKjD,KAAL,CAAWkD,cAAX,GAA4BZ,IAA5B,CAAiC,UAASa,KAAT,EAAe;AAC9CF,aAAKN,WAAL,GAAmBQ,MAAM,CAAN,CAAnB;AACD,OAFD;AAGA,WAAKnD,KAAL,CAAWoD,gBAAX,GAA8Bd,IAA9B,CAAmC,UAASa,KAAT,EAAe;AAChDF,aAAKL,aAAL,GAAqBO,MAAM,CAAN,CAArB;AACD,OAFD;AAGD;;;;0BAEiB,CAEjB;;;0BAEiB,CAEjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC1BUE,cAAAA,cADZ;AAaC,iBAAYlD,MAAZ,EAAoBJ,MAApB,EAA4BuD,gBAA5B,EAA6C;AAAA;;AAAA;;AAAA,WAV7CZ,OAU6C,GAVnC,aAUmC;AAAA,WAT7Ca,GAS6C,GATvC,EASuC;AAAA,WAR7CC,QAQ6C,GARlC,CACT,UADS,EAET,UAFS,EAGT,SAHS,EAIT,SAJS,EAKT,MALS,EAMT,OANS,CAQkC;;AAC3C,WAAKC,SAAL,GAAiBtD,MAAjB;AACA,WAAKH,KAAL,GAAaD,MAAb;AACA,WAAK0C,eAAL,GAAuBa,gBAAvB;AACA,WAAKI,MAAL,GAAc,oCAAiB/B,SAAjB,CAA2B,aAAK;AAC5CgC,UAAEC,WAAF,CAAc,sBAAYlC,OAA1B;AACAiC,UAAEE,UAAF,CAAa,iBAAb,EAA+B,MAAK7D,KAAL,CAAW8D,SAAX,CAAqBC,KAApD;AACD,OAHa,CAAd;AAID;;kBAEDlB,6BAASC,OAAOC,aAAa;AAC3B,WAAKN,eAAL,CAAqBO,OAArB,CAA6B,cAA7B;AACA,WAAKgB,WAAL;AACA,UAAIf,OAAO,IAAX;AACA,UAAGH,MAAMmB,EAAN,IAAYC,SAAZ,IAAyBpB,MAAMmB,EAAN,KAAa,IAAzC,EAA+C;AAC7C,aAAKjE,KAAL,CAAWmE,MAAX,CAAkBrB,MAAMmB,EAAxB,EAA4B3B,IAA5B,CAAiC,UAAS8B,CAAT,EAAW;AAC1CnB,eAAKM,GAAL,GAAWa,CAAX;AACD,SAFD;AAGD;AACF;;kBAEDC,uBAAO;AACL,UAAG,KAAKd,GAAL,CAASU,EAAT,KAAgBC,SAAnB,EACA;AACE,aAAKI,MAAL;AACD,OAHD,MAGO;AACL,aAAK7B,eAAL,CAAqBO,OAArB,CAA6B,YAA7B,EAA2C,KAAKO,GAAhD;AACD;AAEF;;kBAEDe,2BAAS;AAAA;;AACP,UAAIrB,OAAO,IAAX;AACA,WAAKM,GAAL,CAASgB,SAAT,GAAqB,KAAKvE,KAAL,CAAW8D,SAAX,CAAqBU,MAA1C;AACA,WAAKd,MAAL,CAAYe,IAAZ,CAAiB,MAAjB,EAAyBtD,KAAKuD,SAAL,CAAe,KAAKnB,GAApB,CAAzB,EACGjB,IADH,CACQ,gBAAQ;AACZW,aAAK0B,IAAL,GAAYxD,KAAKC,KAAL,CAAWwD,KAAKC,QAAhB,CAAZ;AACA,eAAKpB,SAAL,CAAeqB,YAAf;AACD,OAJH,EAKGC,KALH,CAKS,iBAAS;AACd,YAAGC,MAAMC,MAAN,KAAiB,GAApB,EAAyB;AACvBC,gBAAM,sCAAN;AACA,iBAAKlF,KAAL,CAAWmF,UAAX;AACA,iBAAKhF,MAAL,CAAYiF,eAAZ,CAA4B,OAA5B;AACD,SAJD,MAIO;AACL,iBAAKJ,KAAL,GAAa,sFAAb;AACD;AAEF,OAdH;AAeD;;kBAEDhB,qCAAc;AAAA;;AACZ,UAAIf,OAAO,IAAX;AACA,WAAKS,MAAL,CAAY2B,GAAZ,CAAgB,UAAhB,EAA4BlE,KAAKuD,SAAL,CAAe,KAAKnB,GAApB,CAA5B,EACGjB,IADH,CACQ,gBAAQ;AACZW,aAAKO,QAAL,GAAgBrC,KAAKC,KAAL,CAAWwD,KAAKC,QAAhB,CAAhB;AACD,OAHH,EAIGE,KAJH,CAIS,iBAAS;AACd,YAAGC,MAAMC,MAAN,KAAiB,GAApB,EAAyB;AACvBC,gBAAM,sCAAN;AACA,iBAAKlF,KAAL,CAAWmF,UAAX;AACA,iBAAKhF,MAAL,CAAYiF,eAAZ,CAA4B,OAA5B;AACD,SAJD,MAIO;AACL,iBAAKJ,KAAL,GAAa,2FAAb;AACD;AAEF,OAbH;AAcD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC/EUM,kBAAAA,kBADZ;AAGC,qBAAYC,OAAZ,EAAqBC,KAArB,EAA4BlC,gBAA5B,EAA6C;AAAA;;AAAA;;AAAA,WAW7CZ,OAX6C,GAWnC,WAXmC;;AAC3C,WAAKe,SAAL,GAAiB8B,OAAjB;AACA,WAAKvF,KAAL,GAAawF,KAAb;AACA,WAAK/C,eAAL,GAAuBa,gBAAvB;AACA,WAAKI,MAAL,GAAc,oCAAiB/B,SAAjB,CAA2B,aAAK;AAC5CgC,UAAEC,WAAF,CAAc,sBAAYlC,OAA1B;AACAiC,UAAEE,UAAF,CAAa,iBAAb,EAA+B,MAAK7D,KAAL,CAAW8D,SAAX,CAAqBC,KAApD;AACD,OAHa,CAAd;AAKD;;sBAID0B,2BAAS;AACP,WAAKhC,SAAL,CAAe2B,eAAf,CAA+B,KAA/B,EAAsC,EAAEnB,IAAI,CAAC,CAAP,EAAtC;AACD;;sBAEDyB,2BAAQnC,KAAK;AACX,WAAKE,SAAL,CAAe2B,eAAf,CAA+B,KAA/B,EAAsC,EAAEnB,IAAIV,IAAIoC,GAAV,EAAtC;AACD;;sBAEDC,+BAAUC,OAAO;AACf,UAAGC,QAAQ,4CAAR,CAAH,EAA0D,CAEzD;AACF;;sBAEDjD,+BAAW;AACT,WAAKJ,eAAL,CAAqBO,OAArB,CAA6B,cAA7B;AACA,WAAK+C,WAAL;AACD;;sBAEDA,qCAAc;AAAA;;AACZ,UAAI9C,OAAO,IAAX;AACA,WAAKS,MAAL,CAAY2B,GAAZ,CAAgB,WAAW,KAAKrF,KAAL,CAAW8D,SAAX,CAAqBU,MAAhC,GAAyC,OAAzD,EACGlC,IADH,CACQ,gBAAQ;AACZW,aAAK0B,IAAL,GAAYxD,KAAKC,KAAL,CAAWwD,KAAKC,QAAhB,CAAZ;AACD,OAHH,EAIGE,KAJH,CAIS,iBAAS;AACd,YAAGC,MAAMC,MAAN,KAAiB,GAApB,EAAyB;AACvBC,gBAAM,sCAAN;AACA,iBAAKlF,KAAL,CAAWmF,UAAX;AACA,iBAAKhF,MAAL,CAAYiF,eAAZ,CAA4B,OAA5B;AACD,SAJD,MAIO;AACL,iBAAKJ,KAAL,GAAa,sFAAb;AACD;AAEF,OAbH;AAcD;;;;;MAGUgB,8BAAAA;;;;;kCACXC,yBAAOC,OAAM;AACX,aAAOA,SAASA,MAAMC,WAAN,EAAhB;AACD;;;;;;;;;;;;;;;;;;;;;MC3DkBC,2BADpB;AAUC,8BAAY9C,gBAAZ,EAA8B+C,KAA9B,EAAoC;AAAA;;AAAA;;AAAA,WAPpCC,IAOoC,GAP7B,IAO6B;AAAA,WANpCC,SAMoC,GANxB,IAMwB;AAAA,WALpCC,YAKoC,GALrB,IAKqB;AAAA,WAJpCC,KAIoC,GAJ5B,IAI4B;AAAA,WAHpClD,GAGoC,GAH9B,IAG8B;AAAA,WAFpCO,SAEoC,GAFxB,IAEwB;;AAClC,WAAKrB,eAAL,GAAuBa,gBAAvB;AACA+C,YAAM1E,SAAN,CAAgB,kBAAU;AACxBzB,eACGwG,wBADH,GAEGC,YAFH,CAEgB,EAACC,SAAS;AACtB,sBAAU,kBADY;AAEtB,+BAAmBzF,KAAKuD,SAAL,CAAe,MAAKZ,SAApB;AAFG,WAAV,EAFhB,EAMGF,WANH,CAMe,oCANf;AAOD,OARD;AASA,WAAKiD,IAAL,GAAYR,KAAZ;AACA,WAAKS,SAAL;AACD;;+BAEDA,iCAAW;AACT,UAAI7D,OAAO,IAAX;AACA,WAAKR,eAAL,CAAqBqE,SAArB,CAA+B,mBAA/B,EAAoD,mBAAW;AAC7D7D,aAAK8D,sBAAL;AACD,OAFD;AAGA,WAAKtE,eAAL,CAAqBqE,SAArB,CAA+B,QAA/B,EAAyC,mBAAW;AAClD7D,aAAK+D,YAAL;AACD,OAFD;AAGA,WAAKvE,eAAL,CAAqBqE,SAArB,CAA+B,cAA/B,EAA+C,mBAAW;AACxD7D,aAAKgE,kBAAL;AACD,OAFD;;AAIA,WAAKxE,eAAL,CAAqBqE,SAArB,CAA+B,SAA/B,EAA0C,mBAAW;AACnD7D,aAAKiE,YAAL,CAAkBC,OAAlB;AACD,OAFD;AAGA,WAAK1E,eAAL,CAAqBqE,SAArB,CAA+B,YAA/B,EAA6C,mBAAW;AACtD7D,aAAKmE,eAAL,CAAqBD,OAArB;AACD,OAFD;AAGA,WAAK1E,eAAL,CAAqBqE,SAArB,CAA+B,YAA/B,EAA6C,mBAAW;AACtD7D,aAAKoE,eAAL,CAAqBF,OAArB;AACD,OAFD;;AAIA,WAAK1E,eAAL,CAAqBqE,SAArB,CAA+B,WAA/B,EAA4C,mBAAW;AACrD7D,aAAKqE,cAAL,CAAoBH,OAApB;AACD,OAFD;AAGA,WAAK1E,eAAL,CAAqBqE,SAArB,CAA+B,cAA/B,EAA+C,mBAAW;AACxD7D,aAAKsE,iBAAL,CAAuBJ,OAAvB;AACD,OAFD;AAGA,WAAK1E,eAAL,CAAqBqE,SAArB,CAA+B,cAA/B,EAA+C,mBAAW;AACxD7D,aAAKuE,iBAAL,CAAuBL,OAAvB;AACD,OAFD;AAGA,WAAK1E,eAAL,CAAqBqE,SAArB,CAA+B,gBAA/B,EAAiD,mBAAW;AAC1D7D,aAAKwE,mBAAL,CAAyBN,OAAzB;AACD,OAFD;AAGA,WAAK1E,eAAL,CAAqBqE,SAArB,CAA+B,kBAA/B,EAAmD,mBAAW;AAC5D7D,aAAKyE,qBAAL,CAA2BP,OAA3B;AACD,OAFD;AAGA,WAAK1E,eAAL,CAAqBqE,SAArB,CAA+B,oBAA/B,EAAqD,mBAAW;AAC9D7D,aAAK0E,uBAAL,CAA6BR,OAA7B;AACD,OAFD;AAGD;;+BAKDF,mDAAqB;AAEnB,WAAKX,IAAL,GAAY,KAAKsB,gBAAL,EAAZ;AACA,WAAK9D,SAAL,GAAiB3C,KAAKC,KAAL,CAAWC,eAAeC,OAAf,CAAuB,YAAvB,CAAX,CAAjB;AACD;;+BAEDqG,2DAAwB5D,OAAO;AAC7B,WAAKD,SAAL,GAAiBC,KAAjB;AACA1C,qBAAewG,OAAf,CAAuB,YAAvB,EAAqC1G,KAAKuD,SAAL,CAAeX,KAAf,CAArC;AACD;;+BAEDiD,uCAAe;AACb,WAAKV,IAAL,GAAY,IAAZ;AACA,WAAKxC,SAAL,GAAiB,IAAjB;AACD;;+BAEDiD,2DAAyB;AACvB,UAAIT,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;;AAEA,WAAKsD,SAAL,CAAeZ,GAAf,GAAqBzB,SAArB;AACA,WAAKqC,SAAL,CAAetC,EAAf,GAAoBC,SAApB;AACA,aAAO,IAAItC,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK4D,IAAL,CAAUmB,KAAV,CAAgB,eAAe1B,KAAK9B,MAApC,EAA4C;AAC1CyD,kBAAQ,KADkC;AAE1CC,gBAAM/G,KAAKuD,SAAL,CAAezB,KAAKsD,SAApB;AAFoC,SAA5C,EAGGjE,IAHH,CAGQ,UAAS6F,OAAT,EAAkB;AACxBL,kBAAQK,OAAR;AACD,SALD;AAMD,OAPM,CAAP;AAQD;;+BAKDZ,+CAAkBa,SAAS;AACzB,UAAI9B,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;AACA,WAAK4D,IAAL,CAAUmB,KAAV,CAAgB,eAAe1B,KAAK9B,MAApB,GAA6B,UAA7B,GAA0C4D,OAA1D,EAAmE,EAACH,QAAQ,QAAT,EAAnE,EACG3F,IADH,CACQ,UAAS6F,OAAT,EAAkB;AACtBlF,aAAKR,eAAL,CAAqBO,OAArB,CAA6B,kBAA7B;AACD,OAHH;AAID;;+BAEDsE,yCAAeb,OAAO;AACpB,UAAIH,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;AACA,WAAK4D,IAAL,CAAUmB,KAAV,CAAgB,eAAe1B,KAAK9B,MAApB,GAA6B,SAA7C,EAAwD;AACtDyD,gBAAQ,MAD8C;AAEtDC,cAAM/G,KAAKuD,SAAL,CAAe+B,KAAf;AAFgD,OAAxD,EAGGnE,IAHH,CAGQ,UAAS6F,OAAT,EAAkB;AACtBlF,aAAKR,eAAL,CAAqBO,OAArB,CAA6B,kBAA7B;AACD,OALH;AAMD;;+BAEDwE,+CAAkBf,OAAO;AACvB,UAAIH,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;AACA,WAAK4D,IAAL,CAAUmB,KAAV,CAAgB,eAAe1B,KAAK9B,MAApB,GAA6B,UAA7B,GAA0CiC,MAAMd,GAAhE,EAAqE;AACnEsC,gBAAQ,KAD2D;AAEnEC,cAAM/G,KAAKuD,SAAL,CAAe+B,KAAf;AAF6D,OAArE,EAGGnE,IAHH,CAGQ,UAAS6F,OAAT,EAAkB;AACtBlF,aAAKR,eAAL,CAAqBO,OAArB,CAA6B,kBAA7B;AACD,OALH;AAMD;;+BAED0E,yDAAwB;AACtB,UAAIpB,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;AACA,WAAK4D,IAAL,CAAUmB,KAAV,CAAgB,eAAe1B,KAAK9B,MAApB,GAA6B,SAA7C,EACGlC,IADH,CACQ;AAAA,eAAYuC,SAASwD,IAAT,EAAZ;AAAA,OADR,EAEG/F,IAFH,CAEQ,UAASgG,MAAT,EAAiB;AACrBrF,aAAKsD,SAAL,CAAe+B,MAAf,GAAwBA,MAAxB;AACC,OAJL;AAKD;;+BAKDpB,qCAAa3D,KAAK;AAChB,UAAI+C,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;AACA,WAAK4D,IAAL,CAAUmB,KAAV,CAAgB,eAAe1B,KAAK9B,MAApB,GAA6B,OAA7C,EAAsD;AACpDyD,gBAAQ,MAD4C;AAEpDC,cAAM/G,KAAKuD,SAAL,CAAenB,GAAf;AAF8C,OAAtD,EAGGjB,IAHH,CAGQ,UAAS6F,OAAT,EAAkB;AACtBlF,aAAKR,eAAL,CAAqBO,OAArB,CAA6B,gBAA7B;AACD,OALH;AAMD;;+BAEDoE,2CAAgB7D,KAAK;AACnB,UAAI+C,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;AACA,WAAK4D,IAAL,CAAUmB,KAAV,CAAgB,eAAe1B,KAAK9B,MAApB,GAA6B,QAA7B,GAAwCjB,IAAIoC,GAA5D,EAAiE;AAC/DsC,gBAAQ,KADuD;AAE/DC,cAAM/G,KAAKuD,SAAL,CAAenB,GAAf;AAFyD,OAAjE,EAGGjB,IAHH,CAGQ,UAAS6F,OAAT,EAAkB;AACtBlF,aAAKR,eAAL,CAAqBO,OAArB,CAA6B,gBAA7B;AACD,OALH;AAMD;;+BAEDqE,2CAAgBxB,OAAO;AACrB,UAAIS,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;AACA,WAAK4D,IAAL,CAAUmB,KAAV,CAAgB,eAAe1B,KAAK9B,MAApB,GAA6B,QAA7B,GAAwCqB,KAAxD,EAA+D,EAACoC,QAAQ,QAAT,EAA/D,EACG3F,IADH,CACQ,UAAS6F,OAAT,EAAkB;AACtBlF,aAAKR,eAAL,CAAqBO,OAArB,CAA6B,gBAA7B;AACD,OAHH;AAID;;+BAEDyE,qDAAsB;AACpB,UAAInB,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;AACA,WAAK4D,IAAL,CAAUmB,KAAV,CAAgB,eAAe1B,KAAK9B,MAApB,GAA6B,OAA7C,EACGlC,IADH,CACQ;AAAA,eAAYuC,SAASwD,IAAT,EAAZ;AAAA,OADR,EAEG/F,IAFH,CAEQ,UAASqC,IAAT,EAAe;AACnB1B,aAAKsD,SAAL,CAAe5B,IAAf,GAAsBA,IAAtB;AACD,OAJH;AAKD;;+BAKD4D,qCAAa/D,QAAQ;AACnB,UAAIvB,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,YAAG9E,KAAKsD,SAAL,IAAkB,IAAlB,IAA0BtD,KAAKsD,SAAL,IAAkBrC,SAA/C,EAA0D;;AAExDjB,eAAK4D,IAAL,CAAUmB,KAAV,CAAgB,eAAcxD,MAA9B,EACClC,IADD,CACM;AAAA,mBAAYuC,SAASwD,IAAT,EAAZ;AAAA,WADN,EAEC/F,IAFD,CAEM,UAAS6F,OAAT,EAAkB;AACtBL,oBAAQK,OAAR;AACD,WAJD;AAMD,SARD,MAQO;AACLL,kBAAQ7E,KAAKsD,SAAb;AACD;AACF,OAZM,CAAP;AAaD;;+BAEDpC,yBAAO0B,OAAO;AACZ,UAAIS,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK4D,IAAL,CAAUmB,KAAV,CAAgB,eAAe1B,KAAK9B,MAApB,GAA6B,QAA7B,GAAwCqB,KAAxD,EACCvD,IADD,CACM;AAAA,iBAAYuC,SAASwD,IAAT,EAAZ;AAAA,SADN,EAEC/F,IAFD,CAEM,UAASiB,GAAT,EAAc;AAClBuE,kBAAQvE,GAAR;AACC,SAJH;AAKD,OANM,CAAP;AAOD;;+BAEDiF,6BAASJ,SAAS;AAChB,UAAI9B,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK4D,IAAL,CAAUmB,KAAV,CAAgB,eAAe1B,KAAK9B,MAApB,GAA6B,UAA7B,GAA0C4D,OAA1D,EACC9F,IADD,CACM;AAAA,iBAAYuC,SAASwD,IAAT,EAAZ;AAAA,SADN,EAEC/F,IAFD,CAEM,UAASmE,KAAT,EAAgB;AACpBqB,kBAAQrB,KAAR;AACC,SAJH;AAKD,OANM,CAAP;AAOD;;+BAEDvD,2CAAiB;AACf,UAAIoD,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK4D,IAAL,CAAUmB,KAAV,CAAgB,WAAW1B,KAAK9B,MAAhB,GAAyB,SAAzC,EACGlC,IADH,CACQ;AAAA,iBAAYuC,SAASwD,IAAT,EAAZ;AAAA,SADR,EAEG/F,IAFH,CAEQ,UAASmE,KAAT,EAAgB;AACpBqB,kBAAQrB,KAAR;AACD,SAJH;AAKD,OANM,CAAP;AAOD;;+BAEDrD,+CAAmB;AACjB,UAAIkD,OAAO,KAAKsB,gBAAL,EAAX;AACA,UAAI3E,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK4D,IAAL,CAAUmB,KAAV,CAAgB,WAAW1B,KAAK9B,MAAhB,GAAyB,WAAzC,EACGlC,IADH,CACQ;AAAA,iBAAYuC,SAASwD,IAAT,EAAZ;AAAA,SADR,EAEG/F,IAFH,CAEQ,UAASmE,KAAT,EAAgB;AACpBqB,kBAAQrB,KAAR;AACD,SAJH;AAKD,OANM,CAAP;AAOD;;+BAKDgC,6CAAiBC,QAAQC,WAAW;AAClC,UAAI1F,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK4D,IAAL,CAAUmB,KAAV,CAAgB,MAAhB,EAAwB;AACtBC,kBAAQ,MADc;AAEtBC,gBAAM/G,KAAKuD,SAAL,CAAe,EAAC,SAASgE,MAAV,EAAkB,YAAYC,SAA9B,EAAf;AAFgB,SAAxB,EAGGrG,IAHH,CAGQ;AAAA,iBAAYuC,SAASwD,IAAT,EAAZ;AAAA,SAHR,EAIE/F,IAJF,CAIO,UAAS6F,OAAT,EAAkB;AACvBlF,eAAKR,eAAL,CAAqBO,OAArB,CAA6B,oBAA7B,EAAmDmF,OAAnD;AACAL,kBAAQK,OAAR;AACD,SAPD,EAOGpD,KAPH,CAOS,iBAAS;AAChB,cAAGC,MAAMC,MAAN,KAAiB,GAApB,EAAyB;AACvB8C,mBAAO,8BAAP;AACD,WAFD,MAEO;AACLA,mBAAO,8DAAP;AACD;AACF,SAbD;AAcD,OAfM,CAAP;AAgBD;;+BAEDH,+CAAmB;AACjB,UAAIjH,OAAOQ,KAAKC,KAAL,CAAWC,eAAeC,OAAf,CAAuB,YAAvB,CAAX,CAAX;AACA,UAAIsH,MAAM,EAACC,iBAAiB,KAAlB,EAAV;AACA,UAAGlI,QAAQ,IAAX,EAAiB;AACfiI,YAAIpE,MAAJ,GAAa7D,KAAK6D,MAAlB;AACAoE,YAAIC,eAAJ,GAAsB,IAAtB;AACD;AACD,aAAOD,GAAP;AACD;;+BAKDE,yCAAexC,MAAM;AACnB,UAAIyC,cAAc;AAChBtI,cAAM,EADU;AAEhBuI,kBAAU,EAFM;AAGhBC,eAAO;AAHS,OAAlB;AAKA,UAAG,KAAK1C,SAAL,CAAeD,IAAf,CAAoB9B,MAApB,KAA+B8B,KAAK9B,MAAvC,EAA+C;AAC7CuE,oBAAYtI,IAAZ,GAAoB,KAAK8F,SAAL,CAAeD,IAAf,CAAoB4C,OAApB,CAA4BzI,IAAhD;AACAsI,oBAAYC,QAAZ,GAAwB,KAAKzC,SAAL,CAAeD,IAAf,CAAoB4C,OAApB,CAA4BF,QAApD;AACAD,oBAAYE,KAAZ,GAAqB,KAAK1C,SAAL,CAAeD,IAAf,CAAoB4C,OAApB,CAA4BD,KAAjD;AACD;AACD,aAAOF,WAAP;AACD;;+BAMDI,6BAAST,QAAQC,WAAW;AAC1B,UAAI1F,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK4D,IAAL,CAAUmB,KAAV,CAAgB,MAAhB,EAAwB;AACtBC,kBAAQ,MADc;AAEtBC,gBAAM/G,KAAKuD,SAAL,CAAe,EAAC,SAASgE,MAAV,EAAkB,YAAYC,SAA9B,EAAf;AAFgB,SAAxB,EAGGrG,IAHH,CAGQ;AAAA,iBAAYuC,SAASwD,IAAT,EAAZ;AAAA,SAHR,EAIG/F,IAJH,CAIQ,eAAO;AACbwF,kBAAQc,GAAR;AACD,SAND,EAMG7D,KANH,CAMS,iBAAS;AAChBgD,iBAAO/C,KAAP;AACD,SARD;AASD,OAVM,CAAP;AAWD;;+BAMDoE,+CAAkB9C,MAAM;AACtB,UAAI+C,OAAO;AACT/C,cAAM;AACJgD,qBAAWhD,KAAKX,GADZ;AAEJ4D,iBAAOjD,KAAKiD;AAFR,SADG;AAKTjB,gBAAQ,EALC;AAMT3D,cAAM;AANG,OAAX;AAQA,UAAI1B,OAAO,IAAX;AACA,aAAO,IAAIrB,OAAJ,CAAY,UAAUkG,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C9E,aAAK4D,IAAL,CAAUmB,KAAV,CAAgB,WAAhB,EAA6B;AAC3BC,kBAAQ,MADmB;AAE3BC,gBAAM/G,KAAKuD,SAAL,CAAe2E,IAAf;AAFqB,SAA7B,EAGG/G,IAHH,CAGQ,UAAS6F,OAAT,EAAkB;AACxBL,kBAAQK,OAAR;AACD,SALD;AAMD,OAPM,CAAP;AAQD;;;;oBA5VkB/B;;;;;;;;UCLLzE,YAAAA;AAAT,WAASA,SAAT,CAAmBzB,MAAnB,EAA2B,CAEjC;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCKYsJ,gBAAAA,gBADZ;AAeC,mBAAYrJ,MAAZ,EAAoBJ,MAApB,EAA4B0J,gBAA5B,EAA6C;AAAA;;AAAA,WAb7C/G,OAa6C,GAbnC,OAamC;AAAA,WAZ7CgH,UAY6C,GAZhC,CACX,SADW,EAEX,SAFW,EAGX,SAHW,EAIX,SAJW,EAKX,SALW,EAMX,SANW,EAOX,OAPW,CAYgC;AAAA,WAH7CC,WAG6C,GAH/B,EAG+B;AAAA,WAF7ClD,KAE6C,GAFrC,EAEqC;;AAC3C,WAAKhD,SAAL,GAAiBtD,MAAjB;AACA,WAAKH,KAAL,GAAaD,MAAb;AACA,WAAK0C,eAAL,GAAuBgH,gBAAvB;AACA,UAAIxG,OAAO,IAAX;AACA,WAAKR,eAAL,CAAqBqE,SAArB,CAA+B,gBAA/B,EAAiD,mBAAW;AAC1D7D,aAAK2G,gBAAL,CAAsBzC,OAAtB;AACD,OAFD;AAGA,WAAK1E,eAAL,CAAqBqE,SAArB,CAA+B,mBAA/B,EAAoD,mBAAW;AAC7D7D,aAAK4G,qBAAL,CAA2B1C,OAA3B;AACD,OAFD;AAID;;oBAEDtE,6BAASC,OAAOC,aAAa;AAC3B,WAAKN,eAAL,CAAqBO,OAArB,CAA6B,cAA7B;AACA,UAAIC,OAAO,IAAX;AACA,UAAGH,MAAMmB,EAAN,IAAYC,SAAZ,IAAyBpB,MAAMmB,EAAN,KAAa,IAAzC,EAA+C;AAC7C,aAAKjE,KAAL,CAAWwI,QAAX,CAAoB1F,MAAMmB,EAA1B,EAA8B3B,IAA9B,CAAmC,UAASwH,CAAT,EAAW;AAC5C7G,eAAKwD,KAAL,GAAaqD,CAAb;AACD,SAFD;AAGD,OAJD,MAIO;AACL,aAAKrD,KAAL,GAAa;AACXsD,wBAAc,IAAIC,IAAJ,EADH;AAEXC,iBAAO,EAFI;AAGXpE,iBAAO,CAHI;AAIXqE,gBAAM,CAAC,EAACC,QAAO,CAAR,EAAWF,OAAM,EAAjB,EAAD;AAJK,SAAb;AAMD;AACF;;oBAEDG,2BAAS;AACP,WAAK3D,KAAL,CAAWyD,IAAX,CAAgBG,IAAhB,CAAqB,EAACF,QAAO,KAAK1D,KAAL,CAAWyD,IAAX,CAAgBI,MAAhB,GAAyB,CAAjC,EAAoCL,OAAM,KAAKN,WAA/C,EAArB;AACA,WAAKlH,eAAL,CAAqBO,OAArB,CAA6B,mBAA7B,EAAkD,IAAlD;AACD;;oBAEDuH,+BAAUC,KAAK;AACb,UAAIC,aAAa,qBAAEC,IAAF,CAAO,KAAKjE,KAAL,CAAWyD,IAAlB,EAAwB,UAASS,CAAT,EAAW;AAAC,eAAOA,EAAEhF,GAAF,IAAS6E,IAAI7E,GAApB;AAAwB,OAA5D,CAAjB;AACA,UAAG8E,cAAcvG,SAAjB,EAA4B;AAC1B,aAAKuC,KAAL,CAAWyD,IAAX,GAAkB,qBAAEU,OAAF,CAAU,KAAKnE,KAAL,CAAWyD,IAArB,EAA2BO,UAA3B,CAAlB;AACD;AACD,UAAII,cAAc,CAAlB;AACA,WAAKpE,KAAL,CAAWyD,IAAX,CAAgBY,OAAhB,CAAwB,UAASN,GAAT,EAAa;AACnCA,YAAIL,MAAJ,GAAaU,aAAb;AACD,OAFD;AAGA,WAAKpI,eAAL,CAAqBO,OAArB,CAA6B,mBAA7B,EAAkD,IAAlD;AACD;;oBAED+H,mCAAa;AACX,WAAKtI,eAAL,CAAqBO,OAArB,CAA6B,mBAA7B,EAAkD,IAAlD;AACD;;oBAEDqB,uBAAO;AACL,WAAKoC,KAAL,CAAWuE,UAAX,GAAwB,KAAKC,mBAAL,CAAyB,KAAKxE,KAA9B,CAAxB;;AAEA,UAAG,KAAKA,KAAL,CAAWd,GAAX,KAAmBzB,SAAtB,EACA;AACE,aAAKzB,eAAL,CAAqBO,OAArB,CAA6B,WAA7B,EAA0C,KAAKyD,KAA/C;AACD,OAHD,MAGO;AACL,aAAKhE,eAAL,CAAqBO,OAArB,CAA6B,cAA7B,EAA4C,KAAKyD,KAAjD;AACD;AACD,WAAKhD,SAAL,CAAeqB,YAAf;AACD;;oBAED8E,6CAAiBsB,MAAM;AACrB,UAAG,KAAKzE,KAAL,CAAWsD,YAAX,IAA2BmB,IAA9B,EACE,KAAKzE,KAAL,CAAWsD,YAAX,GAA0BmB,IAA1B;AACH;;oBAEDrB,uDAAsBsB,QAAQX,KAAK;AACjC,WAAK/D,KAAL,CAAWwD,KAAX,GAAmB,KAAKgB,mBAAL,CAAyB,KAAKxE,KAA9B,CAAnB;AACD;;oBAEDwE,mDAAoBG,QAAQ;AAC1B,UAAIC,SAAS,qBAAE9K,GAAF,CAAM6K,OAAOlB,IAAb,EAAmB,UAASM,GAAT,EAAc;AAC5C,eAAOc,OAAOd,IAAIP,KAAX,CAAP;AACD,OAFY,CAAb;AAGA,aAAOoB,OAAOE,MAAP,CACL,UAASC,KAAT,EAAgBC,GAAhB,EAAoB;AAAE,eAASA,GAAD,GAAOD,QAAQC,GAAf,GAAoB,CAA5B;AAAgC,OADjD,EAEH,CAFG,CAAP;AAGD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC/FUjJ,kBAAAA,kBADZ;AAKC,qBAAY+C,OAAZ,EAAqBC,KAArB,EAA4BlC,gBAA5B,EAA6C;AAAA;;AAAA,WAF7CZ,OAE6C,GAFnC,gBAEmC;;AAC3C,WAAKe,SAAL,GAAiB8B,OAAjB;AACA,WAAKmG,SAAL,GAAiBlG,KAAjB;AACA,WAAK/C,eAAL,GAAuBa,gBAAvB;AACD;;sBAEDqI,+BAAW;AACT,WAAKlI,SAAL,CAAe2B,eAAf,CAA+B,OAA/B,EAAwC,EAAEnB,IAAI,CAAC,CAAP,EAAxC;AACD;;sBAED2H,+BAAUnF,OAAO;AACf,WAAKhD,SAAL,CAAe2B,eAAf,CAA+B,OAA/B,EAAwC,EAAEnB,IAAIwC,MAAMd,GAAZ,EAAxC;AACD;;sBAEDkG,mCAAYpF,OAAO;AACjB,UAAGX,QAAQ,6CAAR,CAAH,EAA2D;AACzD,aAAKrD,eAAL,CAAqBO,OAArB,CAA6B,cAA7B,EAA6CyD,MAAMd,GAAnD;AACD;AACF;;sBAED9C,+BAAW;AACT,WAAKJ,eAAL,CAAqBO,OAArB,CAA6B,cAA7B;AACD;;;;;MAIUgD,8BAAAA;;;;;kCACXC,yBAAOC,OAAM;AACX,aAAOA,SAASA,MAAMC,WAAN,EAAhB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCjCU2F,gBAAAA,gBADZ;AAUC,mBAAY3L,MAAZ,EAAoB4L,GAApB,EAAyBzI,gBAAzB,EAA0C;AAAA;;AAAA,WAP1CkD,YAO0C,GAP3B,IAO2B;AAAA,WAL1CF,IAK0C,GALnC;AACHiD,eAAO,EADJ;AAEHyC,kBAAU;AAFP,OAKmC;;AACxC,WAAKvI,SAAL,GAAiBtD,MAAjB;AACA,WAAKH,KAAL,GAAa+L,GAAb;AACA,WAAKtJ,eAAL,GAAuBa,gBAAvB;AACD;;oBAED2I,iCAAY;AACV,UAAIhJ,OAAO,IAAX;AACAA,WAAKuD,YAAL,GAAoB,IAApB;AACA,WAAKxG,KAAL,CAAWyI,gBAAX,CAA4B,KAAKnC,IAAL,CAAUiD,KAAtC,EAA6C,KAAKjD,IAAL,CAAU0F,QAAvD,EACG1J,IADH,CACQ,gBAAQ;AACZ,YAAGgE,IAAH,EAAS;AACPrD,eAAKR,eAAL,CAAqBO,OAArB,CAA6B,eAA7B,EAA8C,IAA9C;AACAC,eAAKQ,SAAL,CAAe2B,eAAf,CAA+B,MAA/B;AACD;AACF,OANH,EAMKL,KANL,CAMW,iBAAS;AAChB9B,aAAKuD,YAAL,GAAoBxB,KAApB;AACD,OARH;AASD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC3BUkH,kBAAAA,kBADZ;AAKC,qBAAY/L,MAAZ,EAAoBgM,gBAApB,EAAsC1J,eAAtC,EAAuD;AAAA;;AACrD,WAAKgB,SAAL,GAAiBtD,MAAjB;AACA,WAAKH,KAAL,GAAamM,gBAAb;AACA,WAAKC,UAAL,GAAkB3J,eAAlB;AACD;;sBAEDI,+BAAW;AACT,WAAKuJ,UAAL,CAAgBpJ,OAAhB,CAAwB,cAAxB;AACD;;sBAEDqJ,qCAAc;AACZ,WAAKD,UAAL,CAAgBpJ,OAAhB,CAAwB,mBAAxB;AACD;;sBAEDsJ,iCAAY;AACV,UAAIrJ,OAAO,IAAX;AACA,UAAG,KAAKsJ,IAAR,EAAc;AACZ,YAAIC,SAAS,IAAIC,UAAJ,EAAb;AACAD,eAAOE,MAAP,GAAiB,UAASC,OAAT,EAAkB;AACjC,iBAAO,UAAShC,CAAT,EAAY;AACjB1H,iBAAKjD,KAAL,CAAWsG,IAAX,CAAgB2C,KAAhB,GAAwB0B,EAAEiC,MAAF,CAASC,MAAjC;AACD,WAFD;AAGD,SAJe,CAIb,KAAKN,IAAL,CAAU,CAAV,CAJa,CAAhB;AAKAC,eAAOM,aAAP,CAAqB,KAAKP,IAAL,CAAU,CAAV,CAArB;AACD;AAEF;;;;;MAGUQ,kCAAAA;;;;;sCACX9G,yBAAO+G,MAAM;AACX,UAAGA,IAAH,EACE,OAAOC,OAAOC,GAAP,CAAWC,eAAX,CAA2BH,KAAK,CAAL,CAA3B,CAAP;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCtCUlB,gBAAAA,gBADZ;AAUC,mBAAY3L,MAAZ,EAAoB4L,GAApB,EAAwB;AAAA;;AAAA,WAPxBvF,YAOwB,GAPT,IAOS;AAAA,WANxBF,IAMwB,GANjB;AACHiD,eAAO,EADJ;AAEHyC,kBAAU,EAFP;AAGHoB,sBAAc;AAHX,OAMiB;;AACtB,WAAK3J,SAAL,GAAiBtD,MAAjB;AACA,WAAKuL,SAAL,GAAiBK,GAAjB;AACD;;oBAED5C,+BAAW;AACT,UAAG,KAAK7C,IAAL,CAAU0F,QAAV,IAAsB,KAAK1F,IAAL,CAAU8G,YAAnC,EAAiD;AAC7C,YAAInK,OAAO,IAAX;AACAA,aAAKuD,YAAL,GAAoB,IAApB;AACA,aAAKkF,SAAL,CAAevC,QAAf,CAAwB,KAAK7C,IAAL,CAAUiD,KAAlC,EAAyC,KAAKjD,IAAL,CAAU0F,QAAnD,EACG1J,IADH,CACQ,eAAO;AACX,cAAGsG,GAAH,EAAQ;AACN3F,iBAAKyI,SAAL,CAAetC,iBAAf,CAAiCR,GAAjC,EAAsCtG,IAAtC,CAA2C,UAAS+K,GAAT,EAAa;AACtDpK,mBAAKQ,SAAL,CAAe2B,eAAf,CAA+B,OAA/B;AACD,aAFD,EAEG,UAASkI,GAAT,EAAc;AACfrK,mBAAKuD,YAAL,GAAoB,YAAY8G,GAAhC;AACD,aAJD;AAKD;AACJ,SATD,EASGvI,KATH,CASS,iBAAS;AAChB9B,eAAKuD,YAAL,GAAoB,YAAYxB,KAAhC;AACD,SAXD;AAYH,OAfD,MAeO;AACL,aAAKuI,OAAL,GAAe,+BAAf;AACD;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCjCUC,iBAAAA,iBADZ;AAKC,oBAAYxN,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,WAAKA,KAAL,GAAaA,KAAb;AACD;;qBASDyN,2BAAS;AACPpM,qBAAeqM,KAAf;AACA,WAAK1N,KAAL,CAAWsG,IAAX,GAAkB,IAAlB;AACA,WAAKtG,KAAL,CAAW8D,SAAX,GAAuB,IAAvB;AACA,WAAK3D,MAAL,CAAYiF,eAAZ,CAA4B,OAA5B;AACD;;;;0BAVqB;AACpB,YAAIzE,OAAOQ,KAAKC,KAAL,CAAWC,eAAeC,OAAf,CAAuB,YAAvB,CAAX,CAAX;AACA,eAAQX,SAAS,IAAjB;AACD;;;;;;;aAXkB;;;;;;;;;;;;;;;;;;;;;;;;;;MCHRgN,mCAAAA;;;;;uCACX1H,yBAAOC,OAAO0H,QAAQ;AACpB,aAAO,sBAAO1H,KAAP,EAAc0H,MAAd,CAAqBA,MAArB,CAAP;AACD;;uCACDC,6BAASC,KAAKF,QAAO;AACnB,aAAO,sBAAOE,GAAP,EAAYF,MAAZ,CAAP;AACD;;;;;ACVH;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA","file":"app-bundle.js","sourcesContent":["import {computedFrom, inject} from 'aurelia-framework';\nimport {Redirect} from 'aurelia-router';\nimport Store from 'common/shooting-log-store';\n\n@inject(Store)\nexport class App {\n\n  constructor(_store) {\n    this.store = _store;\n  }\n\n  configureRouter(config, router) {\n    config.title = 'My Shooting Log';\n    config.addPipelineStep('authorize', AuthorizeStep);\n    config.map([\n      { route: ['', 'welcome'], name: 'home',      moduleId: 'welcome',         auth: true,  nav: true,  title: 'Home' },\n      { route: ['scorecard'],   name: 'scorecard', moduleId: 'round/scorecard', auth: true,  nav: true,  title: 'Scorecard' },\n      { route: ['round'],       name: 'round',     moduleId: 'round/round',     auth: true,  nav: false, title: 'Round' },\n      { route: ['bow_list'],    name: 'bow_list',  moduleId: 'bow/bow_list',    auth: true,  nav: true,  title: 'Bows' },\n      { route: ['bow'],         name: 'bow',       moduleId: 'bow/bow',         auth: true,  nav: false, title: 'Bow Details' },\n      { route: ['profile'],     name: 'profile',   moduleId: 'user/profile',    auth: true,  nav: true,  title: 'Profile' },\n      { route: ['login'],       name: 'login',     moduleId: 'user/login',      auth: false, nav: false, title: 'Login' },\n      { route: ['register'],    name: 'register',  moduleId: 'user/register',   auth: false, nav: false, title: 'Register' },\n    ]);\n\n    this.router = router;\n  }\n}\n\nclass AuthorizeStep {\n\n  run(navigationInstruction, next) {\n    // Check if the route has an \"auth\" key\n    // The reason for using `nextInstructions` is because\n    // this includes child routes.\n    if (navigationInstruction.getAllInstructions().some(i => i.config.auth)) {\n      var auth = JSON.parse(sessionStorage.getItem('auth-token'));\n      if(auth == null) {\n        return next.cancel(new Redirect('login'));\n      }\n    }\n\n    return next();\n  }\n}\n","export default {\n  debug: true,\n  testing: true,\n  API_URL: \"http://www.myshootinglog.com:8080\"\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport Store from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(Router, Store, EventAggregator)\nexport class Welcome {\n  heading = 'Welcome to MyShootingLog!';\n  last30Stats = {};\n  lifetimeStats = {};\n\n  constructor(router, store, eventAggregator) {\n    this.router = router;\n    this.store = store;\n    this.eventAggregator = eventAggregator;\n  }\n\n  activate(parms, routeConfig) {\n    this.eventAggregator.publish('viewActivate');\n    var self = this;\n    this.store.getLast30Stats().then(function(stats){\n      self.last30Stats = stats[0];\n    });\n    this.store.getLifetimeStats().then(function(stats){\n      self.lifetimeStats = stats[0];\n    });\n  }\n\n  get latestRound() {\n\n  }\n\n  get mostUsedBow() {\n\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport Store from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport environment from '../environment';\nimport {HttpClient} from 'aurelia-http-client';\n\n@inject(Router, Store, EventAggregator)\nexport class Bow {\n  \n  heading = 'Bow Details';\n  bow = {};\n  bowTypes = [\n    'Compound',\n    'Crossbow',\n    'Longbow',\n    'Recurve',\n    'Self',\n    'Stick'\n  ];\n  constructor(router, _store, _eventAggregator){\n    this.appRouter = router;\n    this.store = _store;\n    this.eventAggregator = _eventAggregator;\n    this.client = new HttpClient().configure(x => {\n      x.withBaseUrl(environment.API_URL);\n      x.withHeader('x-authorization',this.store.authToken.token);\n    });\n  }\n\n  activate(parms, routeConfig) {\n    this.eventAggregator.publish('viewActivate');\n    this.getBowTypes();\n    var self = this;\n    if(parms.id != undefined && parms.id !== \"-1\") {\n      this.store.getBow(parms.id).then(function(b){\n        self.bow = b;\n      });\n    }\n  }\n\n  save() {\n    if(this.bow.id === undefined)\n    {\n      this.addBow();\n    } else {\n      this.eventAggregator.publish('bow.update', this.bow);\n    }\n\n  }\n\n  addBow() {\n    var self = this;\n    this.bow.member_id = this.store.authToken.userId;\n    this.client.post(\"/bow\", JSON.stringify(this.bow))\n      .then(data => {\n        self.bows = JSON.parse(data.response);\n        this.appRouter.navigateBack();\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n        }\n\n      });\n  }\n\n  getBowTypes() {\n    var self = this;\n    this.client.get(\"/bowtype\", JSON.stringify(this.bow))\n      .then(data => {\n        self.bowTypes = JSON.parse(data.response);\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving list of bow types, please contact support or try again\";\n        }\n\n      });\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport DataLayer from 'common/shooting-log-store';\nimport {HttpClient} from 'aurelia-http-client';\nimport environment from '../environment';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(Router, DataLayer, EventAggregator)\nexport class BowList{\n\n  constructor(_router, _data, _eventAggregator){\n    this.appRouter = _router;\n    this.store = _data;\n    this.eventAggregator = _eventAggregator;\n    this.client = new HttpClient().configure(x => {\n      x.withBaseUrl(environment.API_URL);\n      x.withHeader('x-authorization',this.store.authToken.token);\n    });\n\n  }\n\n  heading = 'Your bows';\n\n  newBow() {\n    this.appRouter.navigateToRoute('bow', { id: -1 });\n  }\n\n  editBow(bow) {\n    this.appRouter.navigateToRoute('bow', { id: bow._id });\n  }\n\n  deleteBow(bowId) {\n    if(confirm(\"Are you sure you want to delete t his bow?\")) {\n      //this.eventAggregator.publish('bow.delete', bowId._id);\n    }\n  }\n\n  activate() {\n    this.eventAggregator.publish('viewActivate');\n    this.refreshBows();\n  }\n\n  refreshBows() {\n    var self = this;\n    this.client.get(\"/user/\" + this.store.authToken.userId + \"/bows\")\n      .then(data => {\n        self.bows = JSON.parse(data.response);\n      })\n      .catch(error => {\n        if(error.status === 403) {\n          alert('Session timeout, please log in again');\n          this.store.clearStore();\n          this.router.navigateToRoute('login');\n        } else {\n          this.error = \"An error occurred while retrieving the job list, please contact support or try again\";\n        }\n\n      });\n  }\n}\n\nexport class UpperValueConverter {\n  toView(value){\n    return value && value.toUpperCase();\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-fetch-client';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator, HttpClient)\nexport default class ShootingLogStore {\n\n  user = null;\n  scorecard = null;\n  errorMessage = null;\n  round = null;\n  bow = null;\n  authToken = null;\n\n  constructor(_eventAggregator, _http){\n    this.eventAggregator = _eventAggregator;\n    _http.configure(config => {\n      config\n        .useStandardConfiguration()\n        .withDefaults({headers: {\n          'Accept': 'application/json',\n          'X-Authorization': JSON.stringify(this.authToken)\n        }})\n        .withBaseUrl('http://www.myshootinglog.com:8080/');\n    });\n    this.http = _http;\n    this.subscribe();\n  }\n\n  subscribe(){\n    let self = this;\n    this.eventAggregator.subscribe('scorecard.changed', payload => {\n      self.handleScorecardChanged();\n    });\n    this.eventAggregator.subscribe('logout', payload => {\n      self.handleLogout();\n    });\n    this.eventAggregator.subscribe('viewActivate', payload => {\n      self.handleViewActivate();\n    });\n    //Bow handlers\n    this.eventAggregator.subscribe('bow.add', payload => {\n      self.handleBowAdd(payload);\n    });\n    this.eventAggregator.subscribe('bow.update', payload => {\n      self.handleBowUpdate(payload);\n    });\n    this.eventAggregator.subscribe('bow.delete', payload => {\n      self.handleBowDelete(payload);\n    });\n    //Scorecard\n    this.eventAggregator.subscribe('round.add', payload => {\n      self.handleRoundAdd(payload);\n    });\n    this.eventAggregator.subscribe('round.delete', payload => {\n      self.handleRoundDelete(payload);\n    });\n    this.eventAggregator.subscribe('round.update', payload => {\n      self.handleRoundUpdate(payload);\n    });\n    this.eventAggregator.subscribe('bowStore.stale', payload => {\n      self.handleBowStoreStale(payload);\n    });\n    this.eventAggregator.subscribe('roundStore.stale', payload => {\n      self.handleRoundStoreStale(payload);\n    });\n    this.eventAggregator.subscribe('user.authenticated', payload => {\n      self.handleUserAuthenticated(payload);\n    });\n  }\n\n  /*************************\n   * GLOBAL EVENT HANDLERS *\n   *************************/\n  handleViewActivate() {\n    //Push scorecard into store\n    this.user = this.getUserInSession();\n    this.authToken = JSON.parse(sessionStorage.getItem('auth-token'));\n  }\n\n  handleUserAuthenticated(token) {\n    this.authToken = token;\n    sessionStorage.setItem('auth-token', JSON.stringify(token));\n  }\n\n  handleLogout() {\n    this.user = null;\n    this.authToken = null;\n  }\n  \n  handleScorecardChanged() {\n    var user = this.getUserInSession();\n    var self = this;\n    //Hack to make mongoose behave.  Need to clean this up at the API side\n    this.scorecard._id = undefined;\n    this.scorecard.id = undefined;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('scorecard/' + user.userId, {\n        method: 'put',\n        body: JSON.stringify(self.scorecard)\n      }).then(function(results) {\n        resolve(results);\n      })\n    });\n  }\n  \n  /************************\n   * ROUND EVENT HANDLERS *\n   ************************/\n  handleRoundDelete(roundId) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/rounds/' + roundId, {method: 'delete'})\n      .then(function(results) {\n        self.eventAggregator.publish('roundStore.stale');\n      });\n  }\n  \n  handleRoundAdd(round) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/rounds', {\n      method: 'post',\n      body: JSON.stringify(round)\n    }).then(function(results) {\n        self.eventAggregator.publish('roundStore.stale');\n      });\n  }\n  \n  handleRoundUpdate(round) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/rounds/' + round._id, {\n      method: 'put',\n      body: JSON.stringify(round)\n    }).then(function(results) {\n        self.eventAggregator.publish('roundStore.stale');\n      });\n  }\n  \n  handleRoundStoreStale() {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/rounds')\n      .then(response => response.json())\n      .then(function(rounds) {\n        self.scorecard.rounds = rounds;\n        });\n  }\n  \n  /**********************\n   * BOW EVENT HANDLERS *\n   **********************/\n  handleBowAdd(bow) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/bows', {\n      method: 'post',\n      body: JSON.stringify(bow)\n    }).then(function(results) {\n        self.eventAggregator.publish('bowStore.stale');\n      });\n  }\n\n  handleBowUpdate(bow) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/bows/' + bow._id, {\n      method: 'put',\n      body: JSON.stringify(bow)\n    }).then(function(results) {\n        self.eventAggregator.publish('bowStore.stale');\n      });\n  }\n\n  handleBowDelete(bowId) {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/bows/' + bowId, {method: 'delete'})\n      .then(function(results) {\n        self.eventAggregator.publish('bowStore.stale');\n      });\n  }\n  \n  handleBowStoreStale() {\n    var user = this.getUserInSession();\n    var self = this;\n    this.http.fetch('scorecard/' + user.userId + '/bows')\n      .then(response => response.json())\n      .then(function(bows) {\n        self.scorecard.bows = bows;\n      });\n  }\n  \n  /***********\n   * METHODS *\n   ***********/\n  getScorecard(userId) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      if(self.scorecard == null || self.scorecard == undefined) {\n        \n        self.http.fetch('scorecard/'+ userId)\n        .then(response => response.json())\n        .then(function(results) {\n          resolve(results);\n        })\n        \n      } else {\n        resolve(self.scorecard);\n      }\n    });\n  }\n\n  getBow(bowId) {\n    var user = this.getUserInSession();\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('scorecard/' + user.userId + '/bows/' + bowId)\n      .then(response => response.json())\n      .then(function(bow) {\n        resolve(bow);\n        });\n    });\n  }\n  \n  getRound(roundId) {\n    var user = this.getUserInSession();\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('scorecard/' + user.userId + '/rounds/' + roundId)\n      .then(response => response.json())\n      .then(function(round) {\n        resolve(round);\n        });\n    });\n  }\n\n  getLast30Stats() {\n    var user = this.getUserInSession();\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('stats/' + user.userId + '/last30')\n        .then(response => response.json())\n        .then(function(round) {\n          resolve(round);\n        });\n    });\n  }\n\n  getLifetimeStats() {\n    var user = this.getUserInSession();\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('stats/' + user.userId + '/lifetime')\n        .then(response => response.json())\n        .then(function(round) {\n          resolve(round);\n        });\n    });\n  }\n\n  /*********************\n   *       USER\n   *********************/\n  authenticateUser(_email, _password) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('auth', {\n        method: 'post',\n        body: JSON.stringify({'email': _email, 'password': _password })\n      }).then(response => response.json())\n       .then(function(results) {\n        self.eventAggregator.publish('user.authenticated', results);\n        resolve(results);\n      }).catch(error => {\n        if(error.status === 401) {\n          reject(\"Invalid username or password\");\n        } else {\n          reject(\"Unknown error occurred during login.  Please try again later\");\n        }\n      });\n    });\n  }\n  \n  getUserInSession() {\n    var auth = JSON.parse(sessionStorage.getItem('auth-token'));\n    var usr = {isAuthenticated: false};\n    if(auth != null) {\n      usr.userId = auth.userId;\n      usr.isAuthenticated = true;\n    }\n    return usr;\n  }\n\n  /**\n   * TODO: Kill this stupid method!\n   */\n  getUserDetails(user) {\n    let userDetails = {\n      name: '',\n      location: '',\n      image: ''\n    };\n    if(this.scorecard.user.userId === user.userId) {\n      userDetails.name =  this.scorecard.user.details.name;\n      userDetails.location =  this.scorecard.user.details.location;\n      userDetails.image =  this.scorecard.user.details.image;\n    }\n    return userDetails;\n  }\n\n  /**\n   * Created the Firebase account and returns the accountID which will be the key\n   * the API uses for accessing the users data\n   */\n  register(_email, _password) {\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('user', {\n        method: 'post',\n        body: JSON.stringify({'email': _email, 'password': _password })\n      }).then(response => response.json())\n        .then(usr => {\n        resolve(usr);\n      }).catch(error => {\n        reject(error);\n      });\n    });\n  }\n  \n  /**\n   * After registration, the users scorecard must be initialized by POSTing a \n   * stub record to the API.  \n   */\n  initUserScorecard(user) {\n    var card = {\n      user: {\n        accountId: user._id,\n        email: user.email\n      },\n      rounds: [],\n      bows: []\n    }\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      self.http.fetch('scorecard', {\n        method: 'post',\n        body: JSON.stringify(card)\n      }).then(function(results) {\n        resolve(results);\n      })\n    });\n  }\n  \n\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport Store from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport _ from 'underscore';\n\n@inject(Router, Store, EventAggregator)\nexport class Round {\n  heading = 'Round';\n  roundTypes = [\n    'FITA 18',\n    'FITA 25',\n    'FITA 30',\n    'FITA 50',\n    'FITA 70',\n    'FITA 90',\n    'Other'\n  ];\n  newEndScore = 30;\n  round = {};\n  \n  constructor(router, _store, _EventAggregator){\n    this.appRouter = router;\n    this.store = _store;\n    this.eventAggregator = _EventAggregator;\n    var self = this;\n    this.eventAggregator.subscribe('roundDate.send', payload => {\n      self.handleDateChange(payload);\n    });\n    this.eventAggregator.subscribe('round.ends.change', payload => {\n      self.handleRoundEndsChange(payload);\n    });\n    \n  }\n\n  activate(parms, routeConfig) {\n    this.eventAggregator.publish('viewActivate');\n    var self = this;\n    if(parms.id != undefined && parms.id !== \"-1\") {\n      this.store.getRound(parms.id).then(function(r){\n        self.round = r;\n      });\n    } else {\n      this.round = {\n        recordedDate: new Date(),\n        score: 30,\n        bowId: 1,\n        ends: [{number:1, score:30}]\n      }\n    }\n  }\n\n  addEnd() {\n    this.round.ends.push({number:this.round.ends.length + 1, score:this.newEndScore});\n    this.eventAggregator.publish('round.ends.change', true);\n  }\n  \n  deleteEnd(end) {\n    var deletedEnd = _.find(this.round.ends, function(e){return e._id == end._id});\n    if(deletedEnd != undefined) {\n      this.round.ends = _.without(this.round.ends, deletedEnd);\n    }\n    var roundNumber = 1;\n    this.round.ends.forEach(function(end){\n      end.number = roundNumber++;\n    })\n    this.eventAggregator.publish('round.ends.change', true);\n  }\n  \n  endChanged() {\n    this.eventAggregator.publish('round.ends.change', true);\n  }\n  \n  save() {\n    this.round.roundScore = this.calculateRoundScore(this.round);\n    \n    if(this.round._id === undefined)\n    {\n      this.eventAggregator.publish('round.add', this.round);\n    } else {\n      this.eventAggregator.publish('round.update',this.round);\n    }\n    this.appRouter.navigateBack();\n  }\n\n  handleDateChange(date) {\n    if(this.round.recordedDate != date)\n      this.round.recordedDate = date;\n  }\n  \n  handleRoundEndsChange(action, end) {\n    this.round.score = this.calculateRoundScore(this.round);\n  }\n  \n  calculateRoundScore(_round) {\n    var scores = _.map(_round.ends, function(end) {\n      return Number(end.score);\n    });\n    return scores.reduce(\n      function(total, num){ return ((num)?(total + num):0) }\n      , 0);\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport DataLayer from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(Router, DataLayer, EventAggregator)\nexport class Welcome{\n\n  heading = 'Your scorecard';\n  \n  constructor(_router, _data, _eventAggregator){\n    this.appRouter = _router;\n    this.dataLayer = _data;\n    this.eventAggregator = _eventAggregator;\n  }\n\n  newRound() {\n    this.appRouter.navigateToRoute('round', { id: -1 });\n  }\n\n  editRound(round) {\n    this.appRouter.navigateToRoute('round', { id: round._id });\n  }\n\n  deleteRound(round) {\n    if(confirm(\"Are you sure you want to delete this round?\")) {\n      this.eventAggregator.publish('round.delete', round._id);\n    }\n  }\n  \n  activate() {\n    this.eventAggregator.publish('viewActivate');\n  }\n  \n}\n\nexport class UpperValueConverter {\n  toView(value){\n    return value && value.toUpperCase();\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport DataLayer from 'common/shooting-log-store';\n\n@inject(Router, DataLayer, EventAggregator)\nexport class Login {\n  \n  errorMessage = null;\n  \n  user = {\n      email: '',\n      password: ''\n  }\n  \n  constructor(router, _dl, _eventAggregator){\n    this.appRouter = router;\n    this.store = _dl;\n    this.eventAggregator = _eventAggregator;\n  }\n  \n  loginUser() {\n    var self = this;\n    self.errorMessage = null;\n    this.store.authenticateUser(this.user.email, this.user.password)\n      .then(user => {\n        if(user) {\n          self.eventAggregator.publish('login.success', true);\n          self.appRouter.navigateToRoute('home');\n        }\n      }).catch(error => {\n        self.errorMessage = error;\n      });\n  }\n}\n","import {computedFrom, inject, URL} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport ShootingLogStore from 'common/shooting-log-store';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(Router, ShootingLogStore, EventAggregator)\nexport class Profile {\n\n  file;\n\n  constructor(router, shootingLogStore, eventAggregator) {\n    this.appRouter = router;\n    this.store = shootingLogStore;\n    this.dispatcher = eventAggregator;\n  }\n\n  activate() {\n    this.dispatcher.publish('viewActivate');\n  }\n\n  saveProfile() {\n    this.dispatcher.publish('scorecard.changed');\n  }\n\n  embedFile() {\n    var self = this;\n    if(this.file) {\n      var reader = new FileReader();\n      reader.onload = (function(theFile) {\n        return function(e) {\n          self.store.user.image = e.target.result;\n        };\n      })(this.file[0]);\n      reader.readAsDataURL(this.file[0]);\n    }\n\n  }\n}\n\nexport class BlobToUrlValueConverter {\n  toView(blob) {\n    if(blob)\n      return window.URL.createObjectURL(blob[0]);\n  }\n}\n","import {computedFrom, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport DataLayer from 'common/shooting-log-store';\n\n@inject(Router, DataLayer)\nexport class Login {\n  \n  errorMessage = null;\n  user = {\n      email: '',\n      password: '',\n      confpassword: ''\n  }\n  \n  constructor(router, _dl){\n    this.appRouter = router;\n    this.dataLayer = _dl;\n  }\n  \n  register() {\n    if(this.user.password == this.user.confpassword) {\n        var self = this;\n        self.errorMessage = null;\n        this.dataLayer.register(this.user.email, this.user.password)\n          .then(usr => {\n            if(usr) {\n              self.dataLayer.initUserScorecard(usr).then(function(res){\n                self.appRouter.navigateToRoute('login')\n              }, function(err) {\n                self.errorMessage = \"ERROR: \" + err;\n              });\n            }  \n        }).catch(error => {\n          self.errorMessage = 'ERROR: ' + error;\n        });    \n    } else {\n      this.message = 'ERROR: Passwords do not match';\n    }\n  }\n}\n","import {bindable} from 'aurelia-framework';\nimport {inject} from 'aurelia-framework';\nimport Store from 'common/shooting-log-store';\n\n@inject(Store)\nexport class NavBar {\n  // User isn't authenticated by default\n  @bindable router = null;\n\n  constructor(store) {\n    this.store = store;\n  }\n\n  // We can check if the user is authenticated\n  // to conditionally hide or show nav bar items\n  get isAuthenticated() {\n    var auth = JSON.parse(sessionStorage.getItem('auth-token'));\n    return (auth !== null);\n  }\n\n  logout() {\n    sessionStorage.clear();\n    this.store.user = null;\n    this.store.authToken = null;\n    this.router.navigateToRoute('login');\n  }\n}\n","import moment from 'moment';\n/**\n * Created by tim on 9/30/2016.\n */\nexport class DateFormatValueConverter {\n  toView(value, format) {\n    return moment(value).format(format);\n  }\n  fromView(str, format){\n    return moment(str, format);\n  }\n}\n",null,null,null,null,null,null,null,null,null,null],"sourceRoot":"..\\src"}